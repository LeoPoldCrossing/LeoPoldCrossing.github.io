<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Leo&#39;s Blog</title>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2017-03-28T03:43:10.000Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>Leo</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>ä¾èµ–æ³¨å…¥</title>
    <link href="http://yoursite.com/2017/03/28/%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5/"/>
    <id>http://yoursite.com/2017/03/28/ä¾èµ–æ³¨å…¥/</id>
    <published>2017-03-28T03:25:48.000Z</published>
    <updated>2017-03-28T03:43:10.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>å…ˆæ¥ä¸€æ®µçœ‹ä¼¼æ¯”è¾ƒè£…é€¼çš„ä»‹ç»ã€‚åœ¨è½¯ä»¶å·¥ç¨‹é¢†åŸŸï¼Œä¾èµ–æ³¨å…¥ï¼ˆDependency Injectionï¼‰æ˜¯ç”¨äºå®ç°æ§åˆ¶åè½¬ï¼ˆInversion of Controlï¼‰çš„æœ€å¸¸è§çš„æ–¹å¼ä¹‹ä¸€ã€‚æœ¬æ–‡ä¸»è¦ä»‹ç»ä¾èµ–æ³¨å…¥åŸç†å’Œå¸¸è§çš„å®ç°æ–¹å¼</p>
<a id="more"></a>
<h1 id="ä¾èµ–æ³¨å…¥çš„ä½œç”¨"><a href="#ä¾èµ–æ³¨å…¥çš„ä½œç”¨" class="headerlink" title="ä¾èµ–æ³¨å…¥çš„ä½œç”¨"></a>ä¾èµ–æ³¨å…¥çš„ä½œç”¨</h1><p>æ§åˆ¶åè½¬ç”¨äºè§£è€¦ï¼Œè§£çš„ç©¶ç«Ÿæ˜¯ä»€ä¹ˆï¼Ÿ<br>å¼•ç”¨ä¸€ä¸‹ Martin Floweråœ¨ä»‹ç»æ³¨å…¥æ—¶ä½¿ç”¨çš„éƒ¨åˆ†ä»£ç è¯´æ˜è¿™ä¸ªé—®é¢˜ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">public class MovieLister&#123;</div><div class="line">    private MovieFinder finderï¼›</div><div class="line">    </div><div class="line">    public MovieLister()&#123;</div><div class="line">        finder = new MovieFinderImpl();</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    public Movie[] moviesDirectedBy(String arg)&#123;</div><div class="line">        List allMovies = finder.findAll();</div><div class="line">        for(Iterator it = allMovies.iterator(); it.hasNext();)&#123;</div><div class="line">            Movie movie = (Movie)it.next();</div><div class="line">            if(!movie.getDirector().equals(arg)) it.remove();</div><div class="line">        &#125;</div><div class="line">        return (Movie[]) allMovies.toArray(new Movie[allMovies.size()]);</div><div class="line">    &#125;</div><div class="line">    ...</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">public interface MovieFinder&#123;</div><div class="line">    void findAll();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è„‘è¡¥ä¸€ä¸‹è¿™æ®µä»£ç çš„åŠŸèƒ½ï¼š</p>
<ul>
<li>MovieListerçš„ç±»æ¥æä¾›éœ€è¦çš„ç”µå½±åˆ—è¡¨ï¼Œä¾èµ–äºMovieFinderå¯¹è±¡</li>
<li>movieDirectedByæ–¹æ³•æ ¹æ®å¯¼æ¼”åæ¥ç­›é€‰ç”µå½±</li>
<li>MovieFinderæ¥å£çš„å®ç°ç±»MovieFinderImplè´Ÿè´£ä¸æ•°æ®åº“äº¤äº’ï¼Œæœç´¢ç”µå½±</li>
</ul>
<p>ç›®å‰çœ‹æ¥ï¼Œæˆ‘ä»¬å®Œç¾çš„å®ç°äº†åŠŸèƒ½ï¼ç„¶è€Œï¼Œæˆ‘ä»¬éƒ½æ™“å¾—ï¼Œéœ€æ±‚æ˜¯æ— æ—¶æ— åˆ»ä¸åœ¨æ”¹å˜çš„~ğŸ˜­ï¼Œç°åœ¨æˆ‘ä»¬éœ€è¦å°†finderçš„å®ç°æ”¹å˜ï¼ˆæ¯”å¦‚å¢åŠ ä¸€ä¸ªå‚æ•°ï¼‰ã€‚é‚£æˆ‘ä»¬å°±éœ€è¦ä¿®æ”¹å¤šä¸ªç±»ã€‚</p>
<p>è¿™å°±æ˜¯ä¾èµ–æ³¨å…¥éœ€è¦å¤„ç†çš„è€¦åˆã€‚è¿™ç§åœ¨MovieListerä¸­åˆ›å»ºMovieFinderImplçš„æ–¹å¼ï¼Œæ˜¯çš„MovieListerä¸ä»…ä»…ä¾èµ–MovieFinderæ¥å£ï¼Œè¿˜ä¾èµ–äºMovieFinderImplè¿™ä¸ªå®ç°ã€‚è¿™ç§åœ¨ä¸€ä¸ªç±»ä¸­ï¼Œç›´æ¥åˆ›å»ºå¦ä¸€ä¸ªç´¯çš„å¯¹è±¡çš„ä»£ç ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºhard init , å®ƒæ˜¯æœ‰æ¯’çš„ï¼š</p>
<ul>
<li>ä¿®æ”¹å®ç°æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹new Objectçš„ä»£ç </li>
<li>ä¸ä¾¿äºæµ‹è¯•ï¼Œä¸Šæ–‡ä¸­çš„MovieListeræ— æ³•å•ç‹¬è¢«æµ‹è¯•ï¼Œå…¶è¡Œä¸ºå’ŒMovieFinderImplç´§ç´§è€¦åˆåœ¨ä¸€èµ·ã€‚</li>
</ul>
<h1 id="ä¾èµ–æ³¨å…¥çš„å®ç°æ–¹å¼"><a href="#ä¾èµ–æ³¨å…¥çš„å®ç°æ–¹å¼" class="headerlink" title="ä¾èµ–æ³¨å…¥çš„å®ç°æ–¹å¼"></a>ä¾èµ–æ³¨å…¥çš„å®ç°æ–¹å¼</h1><p>å…¶å®æˆ‘ä»¬åœ¨å¹³å¸¸çš„å·¥ä½œè¿‡ç¨‹ä¸­ï¼Œä¼šç»å¸¸ä½¿ç”¨ä¾èµ–æ³¨å…¥ï¼Œåªä¸è¿‡å¾ˆå°‘æ³¨æ„ï¼ˆåæ­£æˆ‘æ˜¯ã€‚ã€‚ã€‚ï¼‰ï¼Œä¹Ÿä¸å¤ªæ³¨æ„ä½¿ç”¨ä¾èµ–æ³¨å…¥è¿›è¡Œè§£è€¦ã€‚æˆ‘ä»¬åœ¨è¿™é‡Œä»‹ç»ä¸€ä¸‹ä¾èµ–æ³¨å…¥å®ç°çš„ä¸‰ç§æ–¹å¼ã€‚</p>
<h2 id="æ„é€ å‡½æ•°æ³¨å…¥ï¼ˆContructor-Injectionï¼‰"><a href="#æ„é€ å‡½æ•°æ³¨å…¥ï¼ˆContructor-Injectionï¼‰" class="headerlink" title="æ„é€ å‡½æ•°æ³¨å…¥ï¼ˆContructor Injectionï¼‰"></a>æ„é€ å‡½æ•°æ³¨å…¥ï¼ˆContructor Injectionï¼‰</h2><p>åœ¨ç±»çš„å¤–é¢åˆ›å»ºå¯¹è±¡ï¼Œç„¶åé€šè¿‡æ„é€ æ–¹æ³•ä¼ å…¥ã€‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// æ„é€ å‡½æ•°æ³¨å…¥ï¼ŒMovieListerç±»å°±åªä¾èµ–äºæˆ‘ä»¬å®šä¹‰çš„MovieFinderæ¥å£</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MovieLister</span></span>&#123;</div><div class="line">    <span class="keyword">private</span> MovieFinder finder;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MovieLister</span><span class="params">(MovieFinder finder)</span></span>&#123;</div><div class="line">        <span class="keyword">this</span>.finder = finder;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="setteræ–¹æ³•æ³¨å…¥"><a href="#setteræ–¹æ³•æ³¨å…¥" class="headerlink" title="setteræ–¹æ³•æ³¨å…¥"></a>setteræ–¹æ³•æ³¨å…¥</h2><p>å¢åŠ ä¸€ä¸ªsetteræ–¹æ³•æ¥ä¼ å…¥åˆ›å»ºå¥½çš„MovieFinderå¯¹è±¡ï¼ŒåŒæ ·å¯ä»¥é¿å…åœ¨MovieFinderä¸­hard initè¿™ä¸ªå¯¹è±¡<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MovieLister</span></span>&#123;</div><div class="line">    ...</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setFinder</span><span class="params">(MovieFinder finder)</span></span>&#123;</div><div class="line">        <span class="keyword">this</span>.finder = finder;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="æ¥å£æ³¨å…¥"><a href="#æ¥å£æ³¨å…¥" class="headerlink" title="æ¥å£æ³¨å…¥"></a>æ¥å£æ³¨å…¥</h2><p>æ¥å£æ³¨å…¥ä½¿ç”¨æ¥å£æ¥æä¾›setteræ–¹æ³•ï¼Œå…¶å®ç°æ–¹æ³•å¦‚ä¸‹<br>é¦–å…ˆåˆ›å»ºä¸€ä¸ªæ³¨å…¥ä½¿ç”¨çš„æ¥å£<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">InjectFinder</span></span>&#123;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">injectFinder</span><span class="params">(MovieFinder finder)</span>ï¼›</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>ä¹‹åæˆ‘ä»¬è®©MovieListerå®ç°è¿™ä¸ªæ¥å£<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MovieLister</span> <span class="keyword">implements</span> <span class="title">InjectFinder</span></span>&#123;</div><div class="line">    ...</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">injectFinder</span><span class="params">(MovieFinder finder)</span></span>&#123;</div><div class="line">        <span class="keyword">this</span>.finder = finder;</div><div class="line">    &#125;</div><div class="line">    ...</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>æœ€åæˆ‘ä»¬éœ€è¦æ ¹æ®ä¸åŒçš„æ¡†æ¶åˆ›å»ºè¢«ä¾èµ–çš„MovieFinderçš„å®ç°ã€‚</p>
<h1 id="Javaä¸­çš„æ³¨è§£ä¾èµ–æ³¨å…¥"><a href="#Javaä¸­çš„æ³¨è§£ä¾èµ–æ³¨å…¥" class="headerlink" title="Javaä¸­çš„æ³¨è§£ä¾èµ–æ³¨å…¥"></a>Javaä¸­çš„æ³¨è§£ä¾èµ–æ³¨å…¥</h1><p>åœ¨javaä¸­ï¼Œä½¿ç”¨æ³¨è§£è¿›è¡Œä¾èµ–æ³¨å…¥æ˜¯æœ€å¸¸ç”¨çš„ã€‚é€šè¿‡åœ¨å­—æ®µçš„å£°æ˜å‰æ·»åŠ @Injectæ³¨è§£è¿›è¡Œæ ‡è®°ï¼Œæ¥å®ç°ä¾èµ–å¯¹è±¡çš„è‡ªåŠ¨æ³¨å…¥ã€‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Human</span></span>&#123;</div><div class="line">    ...</div><div class="line">    <span class="meta">@Inject</span> Father father</div><div class="line">    ...</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Human</span><span class="params">()</span></span>&#123;</div><div class="line">        </div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>ç¥å¥‡çš„@Injectæ³¨è§£ï¼Œä¸€ä¸ªæ³¨è§£å°±è‡ªåŠ¨æ³¨å…¥äº†ï¼Ÿ å®è´¨ä¸Šï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä½¿ç”¨ä¾èµ–æ³¨å…¥æ¡†æ¶ï¼Œè¿›è¡Œä¸€äº›é…ç½®ã€‚æ¯”å¦‚Daggerã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;p&gt;å…ˆæ¥ä¸€æ®µçœ‹ä¼¼æ¯”è¾ƒè£…é€¼çš„ä»‹ç»ã€‚åœ¨è½¯ä»¶å·¥ç¨‹é¢†åŸŸï¼Œä¾èµ–æ³¨å…¥ï¼ˆDependency Injectionï¼‰æ˜¯ç”¨äºå®ç°æ§åˆ¶åè½¬ï¼ˆInversion of Controlï¼‰çš„æœ€å¸¸è§çš„æ–¹å¼ä¹‹ä¸€ã€‚æœ¬æ–‡ä¸»è¦ä»‹ç»ä¾èµ–æ³¨å…¥åŸç†å’Œå¸¸è§çš„å®ç°æ–¹å¼&lt;/p&gt;
    
    </summary>
    
      <category term="æ¡†æ¶" scheme="http://yoursite.com/categories/%E6%A1%86%E6%9E%B6/"/>
    
    
      <category term="ä¾èµ–æ³¨å…¥" scheme="http://yoursite.com/tags/%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5/"/>
    
  </entry>
  
  <entry>
    <title>MVCï¼ŒMVPï¼ŒMVVM æ¶æ„åˆ†æ</title>
    <link href="http://yoursite.com/2017/03/10/MVC-MVP-MVVM/"/>
    <id>http://yoursite.com/2017/03/10/MVC-MVP-MVVM/</id>
    <published>2017-03-10T01:55:48.000Z</published>
    <updated>2017-03-28T03:42:23.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p> MVC,MVP,MVVM ä½œä¸º Android å¼€å‘ä¸­è€³ç†Ÿèƒ½è¯¦çš„ä¸‰ä¸ªæ¡†æ¶ï¼Œä¸€ç›´å¤„åŠæ‡µé€¼çš„çŠ¶æ€ï¼Œæœ€è¿‘åˆ†æäº†ä¸€äº›è°·æ­Œå®˜æ–¹ç»™å‡ºçš„samplesä»£ç ï¼Œè®°å½•ä¸‹è‡ªå·±çš„ç†è§£ï¼Œè½»å–·~</p>
</blockquote>
<a id="more"></a>
<h1 id="MVC-MVP-MVVM"><a href="#MVC-MVP-MVVM" class="headerlink" title="MVC,MVP,MVVM"></a>MVC,MVP,MVVM</h1><h2 id="MVC"><a href="#MVC" class="headerlink" title="MVC"></a>MVC</h2><p>Model View Controller,è½¯ä»¶ä¸­æœ€å¸¸è§çš„ä¸€ç§æ¡†æ¶ï¼ŒController å±‚è´Ÿè´£æ“ä½œ Model æ•°æ®ï¼Œå¹¶ä¸”è¿”å›ç»™ View å±‚è¿›è¡Œå±•ç¤ºã€‚</p>
<p><img src="http://static.zybuluo.com/LeoPoldCrossing/oanqhsxxmpa79b49rjc8fqry/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-03-08%2014.15.04.png" alt="MVC æ¶æ„å›¾"></p>
<p>ä»ä¸Šå›¾çœ‹å‡ºï¼Œç”¨æˆ·é€šè¿‡ view å±‚å‘å‡ºæŒ‡ä»¤åˆ° controller å±‚ï¼Œcontroller é€šçŸ¥ model å±‚æ›´æ–°æ•°æ®ï¼Œmodel å®Œæˆåç›´æ¥æ˜¾ç¤ºåœ¨ view å±‚ä¸Šã€‚</p>
<p>æ—¢ç„¶æ˜¯ Android çŒ¿ï¼Œé‚£æˆ‘ä»¬ä»åˆ†æä¸‹ MVCæ¨¡å‹åœ¨ Android ä¸­çš„æç°ï¼š</p>
<ul>
<li>View : layout.xml </li>
<li>Model: å„ç§ JavaBean</li>
<li>Controller : Activityï¼ŒFragment ç­‰ç­‰</li>
</ul>
<p>æˆ‘ä»¬æ¥åˆ†æä¸€ä¸ªåœºæ™¯ï¼šç‚¹å‡»æŒ‰é’®ä¸‹è½½æ–‡ä»¶<br>æŒ‰é’®æ˜¯å¸è½½xmlé‡Œé¢çš„ï¼Œå±äºviewå±‚çš„<br>ç½‘ç»œè¯·æ±‚ï¼Œæ•°æ®è§£æç›¸å…³ä»£ç å†™åœ¨å…¶ä»–ç±»é‡Œï¼Œæ¯”å¦‚ netHelper ï¼Œå±äºmodelå±‚ã€‚<br>view å’Œ model é€šè¿‡button.setOnClickListener()å…³è”å…¶æ¥ï¼Œå…¶å¸è½½activityä¸­ï¼Œå¯¹åº”äº controller å±‚ã€‚</p>
<p>å¥½åƒå¾ˆæ¸…æ™°ï¼Œçœ‹èµ·æ¥æ²¡æ¯›ç—…çš„æ ·å­~å¼€å§‹æäº‹æƒ…ã€‚ã€‚ã€‚<br>å¦‚æœæ•°æ®å›æ¥éœ€è¦åœ¨viewå±‚è¿›è¡Œå±•ç¤ºï¼Œæ§åˆ¶æŸäº›æ§ä»¶çš„éšè—/æ˜¾ç¤ºï¼Œxmlæ–‡ä»¶å°±æ— èƒ½ä¸ºåŠ›äº†ï¼Œæˆ‘ä»¬åªèƒ½å°†ä»£ç å†™åœ¨ activity ä¸­ã€‚activity å°±å¼€å§‹æ‰¾ä¸åˆ°è‡ªå·±çš„å½’å±äº†ï¼Œæˆ‘æ˜¯è°ï¼Ÿ view or controllerï¼Ÿ<br>å¦‚æœä¸€ä¸ªé€»è¾‘å¤æ‚çš„é¡µé¢ï¼Œç»´æŠ¤èµ·æ¥ç®€ç›´æ˜¯å™©æ¢¦ã€‚</p>
<p>å½“ç„¶ä»ä¸Šå›¾ä¹Ÿå¯ä»¥çœ‹åˆ°Modelå±‚å’ŒViewå±‚å¹¶æ²¡æœ‰éš”ç¦»å¼€ï¼Œè¿™æ˜¯ä¸€ä¸ªé‡è¦çš„ç¼ºé™·ã€‚è¿èƒŒäº†ç¨‹åºçš„ä½è€¦åˆåŸåˆ™ã€‚</p>
<h2 id="MVP"><a href="#MVP" class="headerlink" title="MVP"></a>MVP</h2><p>MVP ä½œä¸º MVC çš„æ¼”åŒ–ï¼Œè§£å†³äº†ä¸å°‘ MVC çš„é—®é¢˜ã€‚å¯¹äº android æ¥è¯´ï¼ŒMVP çš„ model å’Œ MVC æ˜¯ä¸€æ ·çš„ï¼Œè€Œ activity å’Œ fragment ä¸å†æ˜¯ controller å±‚ï¼Œè€Œæ˜¯çº¯ç²¹çš„ view å±‚ï¼Œæ‰€æœ‰å…³äºç”¨æˆ·äº‹ä»¶çš„è½¬å‘å…¨éƒ¨äº¤ç”± presenter å±‚å¤„ç†ã€‚<br><img src="http://static.zybuluo.com/LeoPoldCrossing/wkn35fa4inl0j9j4gr9gkrgm/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-03-09%2009.28.48.png" alt="MVP æ¶æ„ç¤ºä¾‹å›¾"></p>
<h3 id="ä¼˜åŠ¿"><a href="#ä¼˜åŠ¿" class="headerlink" title="ä¼˜åŠ¿"></a>ä¼˜åŠ¿</h3><p>çœ‹å›¾è¯´è¯~æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹ï¼ŒMVPæ¶æ„æ˜¯å¦‚ä½•è§£å†³ MVC é¢å¯¹çš„é—®é¢˜ï¼š</p>
<ul>
<li><p>view å±‚å’Œ model å±‚å®Œå…¨è§£è€¦ã€‚<br>Presenter å……å½“æ¡¥æ¢ï¼Œview å±‚å‘å‡ºçš„äº‹ä»¶ä¼ é€’åˆ° presenter å±‚ï¼Œç”±På±‚æ“ä½œmodelï¼Œè·å–æ•°æ®åé€šçŸ¥ view å±‚æ›´æ–°UIã€‚</p>
</li>
<li><p>activity å’Œ fragment è‡ƒè‚¿çš„é—®é¢˜ã€‚<br>activity å’Œ fragment å±äº view å±‚ï¼Œä»…ä»…æ˜¯æ•°æ®å›è°ƒåæ›´æ–° UIã€‚åœ¨activityä¸­å’Œfragmentä¸­æ²¡æœ‰ä»»ä½•ä¸modelç›¸å…³çš„é€»è¾‘ä»£ç ï¼Œè€Œæ˜¯å°†è¿™éƒ¨åˆ†ä»£ç æ”¾åˆ°presenterå±‚ä¸­ï¼Œé€šè¿‡æ¥å£çš„å½¢å¼å°† view å±‚éœ€è¦çš„æ•°æ®è¿”å›ã€‚</p>
</li>
<li><p>ä¾¿äºæµ‹è¯•ã€‚<br>æ¯”å¦‚å¦‚æœæˆ‘ä»¬éœ€è¦æµ‹è¯•è·å–æ•°æ®åŠŸèƒ½ï¼Œåªéœ€è¦å®ç°å¯¹åº”çš„æ¥å£ï¼Œçœ‹presenteræ˜¯å¦è°ƒç”¨äº†ç›¸åº”çš„æ–¹æ³•ã€‚ä¹Ÿå¯ä»¥åœ¨presenterä¸­åˆ¶é€ å‡æ•°æ®ï¼Œåˆ†å‘ç»™view ï¼Œç”¨æ¥æµ‹è¯•å¸ƒå±€æ˜¯å¦æ­£ç¡®ã€‚</p>
</li>
<li><p>é€»è¾‘æ¸…æ™°ï¼Œè€¦åˆæ€§ä½ï¼Œå¯ç»´æŠ¤æ€§æé«˜</p>
</li>
</ul>
<h3 id="ç¼ºé™·"><a href="#ç¼ºé™·" class="headerlink" title="ç¼ºé™·"></a>ç¼ºé™·</h3><ul>
<li>æ¥å£è¿‡å¤šï¼Œä¸€å®šç¨‹åº¦å½±å“æˆ‘ä»¬çš„ç¼–ç æ•ˆç‡å’Œä»£ç å¯è¯»æ€§</li>
<li>é€»è¾‘æ¯”è¾ƒå¤æ‚çš„é¡µé¢ï¼ŒActivity ä»£ç è¿˜æ˜¯ä¼šæ¯”è¾ƒå¤šï¼Œå½“ç„¶è¦æ¯”MVCè¦å¥½çš„å¤šï¼Œè€Œä¸”é€»è¾‘æ¸…æ™°</li>
<li>Presenter å±‚æ¯”è¾ƒè‡ƒè‚¿</li>
</ul>
<h3 id="æœ€ä½³å®è·µ"><a href="#æœ€ä½³å®è·µ" class="headerlink" title="æœ€ä½³å®è·µ"></a>æœ€ä½³å®è·µ</h3><ul>
<li>ä½¿ç”¨ Fragment ä½œä¸º view å±‚ï¼Œè€Œ activity åˆ™æ˜¯ä¸€ä¸ªç”¨äºåˆ›å»º view(fragment)å’Œ presenter çš„æ§åˆ¶å™¨ã€‚</li>
<li>æ ¹æ®ä¸šåŠ¡éœ€æ±‚æŠ½å–åŸºç±»ï¼Œå®šä¹‰æ¥å£ï¼Œå…¬å…±çš„é€»è¾‘å°½é‡æŠ½å–ï¼Œå‡å°‘ä»£ç é‡ã€‚</li>
</ul>
<h2 id="MVVM"><a href="#MVVM" class="headerlink" title="MVVM"></a>MVVM</h2><p>MVVM æœ€æ—©æ˜¯ç”±å¾®è½¯æå‡ºï¼Œå…ˆä¸Šå›¾ï¼š<br><img src="http://static.zybuluo.com/LeoPoldCrossing/032tt769o9u7x2kd45oijzrp/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-03-09%2018.03.19.png" alt="MVVM æ¶æ„å›¾"><br>ä» MVVM æ¶æ„å›¾åˆ†æï¼ŒMVVM å’Œ MVP çš„åŒºåˆ«è²Œä¼¼ä¸å¤§ï¼Œpresenter æ¢æˆäº† viewmodelå±‚ï¼Œè¿˜æœ‰ä¸€ç‚¹å°±æ˜¯ view å±‚å’Œ viewModel å±‚æ˜¯bindingçš„å…³ç³»ã€‚viewmodelå±‚çš„æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œviewå±‚ä¼šç›¸åº”çš„æ›´æ–°UIã€‚</p>
<h3 id="DataBinding"><a href="#DataBinding" class="headerlink" title="DataBinding"></a>DataBinding</h3><p><a href="https://leopoldcrossing.github.io/2017/02/17/DataBinding%E4%BB%8B%E7%BB%8D/" target="_blank" rel="external">DataBindingæ¡†æ¶</a><br>Android å¹³å° MVVM çš„ç›®å‰ç›¸å½“ç«çˆ†ï¼Œè°·æ­Œæ¬§å·´çš„DataBindingæ¡†æ¶åŠŸä¸å¯æ²¡ã€‚å®ƒå¯ä»¥è®©æˆ‘ä»¬è½»æ¾çš„å®ç°MVVMã€‚çœ‹äº†ç½‘ä¸Šå¾ˆå¤šçš„æ–‡ç« ï¼Œéƒ½è¯´DataBindingå°±æ˜¯ViewModelå±‚ï¼Œæˆ‘æœ‰ç‚¹ä¸åŒçš„çœ‹æ³•ï¼Œåœ¨è¿™é‡Œæå‡ºæ¥ï¼Œå¤§å®¶è®¨è®ºä¸€ä¸‹ã€‚</p>
<ul>
<li><p>ä¼—å¤šåšæ–‡çš„è§‚ç‚¹ï¼š Android ä¸­ MVVM å°±æ˜¯ Databinding æ¡†æ¶çš„è¿ç”¨ã€‚Android Data Bindingä¸­çš„ ViewModelæ˜¯æ ¹æ®layoutè‡ªåŠ¨ç”Ÿæˆçš„Bindingç±»ï¼Œæ¯”å¦‚ activity_main.xml ,ç”Ÿæˆçš„Bindingç±»å°±æ˜¯ActivityMainBindingã€‚</p>
</li>
<li><p>ä¸åŒè§‚ç‚¹ï¼šViewModel æ˜¯å¯ä»¥è¿›è¡Œ binding çš„æ•°æ®æ¨¡å‹ï¼ŒBinding ç±»æ˜¯View å’Œ ViewModel ä¹‹é—´çš„æ¡¥æ¢ã€‚ViewModelå±‚æ•°æ®å¯¹è±¡ä¸‰ç§å½¢å¼ï¼š</p>
</li>
</ul>
<ol>
<li>ç»§æ‰¿BaseObservable </li>
<li>Observable Fields</li>
<li>Observable Collections<br>è¿™æ ·å®šä¹‰çš„æ•°æ®å¯¹è±¡å‘ç”Ÿæ”¹å˜æ—¶ï¼ŒåŒæ­¥æ›´æ–°UIã€‚<br>DataBinding æ¡†æ¶é€šè¿‡<code>setContentView(int  resourceId
)</code> å’Œ<code>setXXX()</code> æ–¹æ³•å®ŒæˆViewå’ŒViewModelçš„ç»‘å®šã€‚</li>
</ol>
<h2 id="å°ç»“ï¼šç†è®ºçŸ¥è¯†è®²å®Œäº†ï¼Œæˆ‘ä»¬æ€»ç»“ä¸€ä¸‹"><a href="#å°ç»“ï¼šç†è®ºçŸ¥è¯†è®²å®Œäº†ï¼Œæˆ‘ä»¬æ€»ç»“ä¸€ä¸‹" class="headerlink" title="å°ç»“ï¼šç†è®ºçŸ¥è¯†è®²å®Œäº†ï¼Œæˆ‘ä»¬æ€»ç»“ä¸€ä¸‹"></a>å°ç»“ï¼šç†è®ºçŸ¥è¯†è®²å®Œäº†ï¼Œæˆ‘ä»¬æ€»ç»“ä¸€ä¸‹</h2><ul>
<li>äº†è§£åŒºåˆ† MVCï¼ŒMVPï¼ŒMVVM</li>
<li>åˆæ­¥äº†è§£è¿™ä¸‰ç§æ¨¡å¼åœ¨Androidä¸­çš„ä½¿ç”¨ã€‚</li>
<li>DataBinding åœ¨ MVVM æ¨¡å¼ä¸­çš„èŒè´£</li>
</ul>
<p>å…¶å®ï¼ŒçœŸæ­£çš„æœ€ä½³å®è·µéƒ½æ˜¯äººæƒ³å‡ºæ¥çš„ï¼Œæˆ‘ä»¬å¹¶ä¸ä¸€å®šè¦æ­»ç£•ä¸€ç§æ¨¡å¼ã€‚seeä¸€ä¸‹è°·æ­Œå¤§å¤§å®ç°çš„æ¶æ„ã€‚</p>
<h1 id="Android-å®˜æ–¹æ¶æ„åˆ†æ"><a href="#Android-å®˜æ–¹æ¶æ„åˆ†æ" class="headerlink" title="Android å®˜æ–¹æ¶æ„åˆ†æ"></a>Android å®˜æ–¹æ¶æ„åˆ†æ</h1><h2 id="Android-architectureä»‹ç»"><a href="#Android-architectureä»‹ç»" class="headerlink" title="Android - architectureä»‹ç»"></a>Android - architectureä»‹ç»</h2><p><a href="https://github.com/googlesamples/android-architecture" target="_blank" rel="external">é¡¹ç›®åœ°å€:android-architecture</a><br>Androidæ¡†æ¶æä¾›äº†å¾ˆå¤§çš„çµæ´»æ€§å»åˆ›å»ºä¸€ä¸ªAPPã€‚è¿™ç§çµæ´»æ€§å¾ˆæœ‰ä»·å€¼ï¼Œä½†æ˜¯ä¹Ÿè®©appæœ‰å¾ˆå¤šç±»ï¼Œä¸ä¸€è‡´çš„å‘½åå’Œä¸è§„èŒƒçš„æ¡†æ¶ç»“æ„ã€‚å¯¼è‡´æµ‹è¯•ï¼Œç»´æŠ¤ï¼Œæ‰©å±•å›°éš¾ã€‚<br>Android Architecture æ¼”ç¤ºäº†å¸®åŠ©è§£å†³æˆ–é¿å…è¿™äº›é—®é¢˜çš„å¸¸ç”¨æ–¹æ¡ˆï¼Œè¯¥é¡¹ç›®ç”¨ä¸åŒçš„æ¶æ„å®ç°äº†åŒä¸€ä¸ªAPPã€‚å½“ç„¶è¿™äº›samplesä»…ä»…æ˜¯ä½œä¸ºå‚è€ƒï¼Œåœ¨æˆ‘ä»¬åˆ›å»ºè‡ªå·±çš„appæ—¶ï¼Œè¿˜æ˜¯æ ¹æ®éœ€æ±‚é€‰æ‹©æœ€åˆé€‚çš„ã€‚</p>
<h3 id="ç¨³å®šçš„samples"><a href="#ç¨³å®šçš„samples" class="headerlink" title="ç¨³å®šçš„samples"></a>ç¨³å®šçš„samples</h3><p><img src="http://static.zybuluo.com/LeoPoldCrossing/k6uhs2m0fx4ocf9ks4qer2hn/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-03-10%2015.00.21.png" alt="å±å¹•å¿«ç…§ 2017-03-10 15.00.21.png-98.7kB"></p>
<h3 id="æ­£åœ¨å¼€å‘çš„samples"><a href="#æ­£åœ¨å¼€å‘çš„samples" class="headerlink" title="æ­£åœ¨å¼€å‘çš„samples"></a>æ­£åœ¨å¼€å‘çš„samples</h3><p><img src="http://static.zybuluo.com/LeoPoldCrossing/fe3cf56gby1dqt2ai4nr4g0b/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-03-10%2015.00.41.png" alt="å±å¹•å¿«ç…§ 2017-03-10 15.00.41.png-47.6kB"></p>
<p>åºŸè¯ä¸å¤šè¯´äº†ï¼Œä¸‹é¢é€‰æ‹©ä¸¤ä¸ªæˆ‘æƒ³è¦åœ¨é¡¹ç›®ä¸­ä½¿ç”¨çš„ä¸¤ä¸ªæ¶æ„è¿›è¡Œåˆ†æï¼š<br><code>todo-mvp</code>å’Œ<code>todo-mvp-databinding</code></p>
<h2 id="TODO-MVPæ¶æ„åˆ†æ"><a href="#TODO-MVPæ¶æ„åˆ†æ" class="headerlink" title="TODO-MVPæ¶æ„åˆ†æ"></a>TODO-MVPæ¶æ„åˆ†æ</h2><p>todo-mvp æ˜¯åŸºç¡€çš„MVPæ¶æ„ï¼Œæ²¡æœ‰ä½¿ç”¨å…¶ä»–çš„ä»»ä½•ç±»åº“ã€‚</p>
<h3 id="appè®¾è®¡"><a href="#appè®¾è®¡" class="headerlink" title="appè®¾è®¡"></a>appè®¾è®¡</h3><p>è¯¥ç¤ºä¾‹é¡¹ç›®çš„ä»£ç ç»„ç»‡æ–¹å¼å®Œå…¨æŒ‰ç…§åŠŸèƒ½ç»„ç»‡</p>
<ul>
<li>Tasks - ç®¡ç†tasksåˆ—è¡¨</li>
<li>TaskDetail - æŸ¥çœ‹taskè¯¦æƒ…ï¼Œå¹¶æä¾›åˆ é™¤åŠŸèƒ½</li>
<li>AddEditTask - å¢åŠ å’Œç¼–è¾‘ tasks</li>
<li>Statistics - æŸ¥çœ‹æœ€è¿‘çš„æ—¥ç¨‹ </li>
</ul>
<p>æ¯ä¸€ä¸ªåŠŸèƒ½å†…éƒ¨åˆ†ä¸ºxActivity,xContract,xFragment,xPresenterå››ä¸ªç±»æ–‡ä»¶ã€‚</p>
<ul>
<li>Activity ç±»ï¼Œç”¨äºåˆ›å»ºFragment å’Œ Presenter</li>
<li>Contract ç±»ï¼Œè¿™ä¸ªä¸ä¹‹å‰è§åˆ°çš„mvpå®ç°éƒ½ä¸åŒï¼Œè¯¥ç±»ç”¨äºç»Ÿä¸€ç®¡ç† view å’Œ presenter çš„æ‰€æœ‰æ¥å£ï¼Œä½¿å¾— view å’Œ presenter ä¸­çš„åŠŸèƒ½éå¸¸æ¸…æ™°ã€‚</li>
<li>Fragmentç±»ï¼ŒView å±‚ ï¼Œå®ç° view æ¥å£</li>
<li>Presenterç±»ï¼ŒContractç±»ä¸­ç›¸åº” Presenter æ¥å£çš„å®ç°ç±»</li>
</ul>
<p>ç»“æ„å›¾å¦‚ä¸‹ï¼š<br><img src="http://static.zybuluo.com/LeoPoldCrossing/65hqqxllygeeef2okibi9mfc/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-03-10%2015.29.23.png" alt="å±å¹•å¿«ç…§ 2017-03-10 15.29.23.png-25.1kB"></p>
<h3 id="ä»£ç åˆ†æ"><a href="#ä»£ç åˆ†æ" class="headerlink" title="ä»£ç åˆ†æ"></a>ä»£ç åˆ†æ</h3><h4 id="åŸºç±»"><a href="#åŸºç±»" class="headerlink" title="åŸºç±»"></a>åŸºç±»</h4><p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸¤ä¸ªBaseæ¥å£ç±»ï¼Œ BasePresenter å’Œ BaseView<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">BasePresenter</span></span>&#123;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">start</span><span class="params">()</span></span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>BasePresenterä¸­å«æœ‰æ–¹æ³•start(),è¯¥æ–¹æ³•çš„ä½œç”¨æ˜¯presenterå¼€å§‹è·å–æ•°æ®å¹¶è°ƒç”¨ view ä¸­çš„æ–¹æ³•æ›´æ–°UIã€‚å…¶è°ƒç”¨æ—¶æœºæ˜¯åœ¨ Fragment ç±»çš„ onResume() æ–¹æ³•ä¸­ã€‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">BaseView</span>&lt;<span class="title">T</span>&gt;</span>&#123;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setPresenter</span><span class="params">(T presenter)</span></span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>BaseView ä¸­å«æœ‰æ–¹æ³• setPresenterï¼Œè¯¥æ–¹æ³•ä½œç”¨æ˜¯å°†presenterç¤ºä¾‹ä¼ å…¥ view ä¸­ï¼Œè°ƒç”¨æ—¶æœºæ˜¯ Presenter å®ç°ç±»çš„æ„é€ å‡½æ•°ä¸­ã€‚</p>
<h4 id="å¥‘çº¦ç±»"><a href="#å¥‘çº¦ç±»" class="headerlink" title="å¥‘çº¦ç±»"></a>å¥‘çº¦ç±»</h4><p>ä¹‹å‰è¯´è¿‡å¥‘çº¦ç±»ï¼Œæ˜¯ä¸ä¹‹å‰æ‰€è§çš„MVPå®ç°ä¸åŒï¼Œä¹Ÿæ˜¯æˆ‘æ„Ÿè§‰å¾ˆä¼˜é›…çš„åœ°æ–¹ã€‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">view å’Œ presenter çš„èŒè´£å¾ˆæ˜äº†ï¼Œå¢åˆ æ”¹éƒ½å¾ˆæ–¹ä¾¿</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">TaskDetailContract</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="class"><span class="keyword">interface</span> <span class="title">View</span> <span class="keyword">extends</span> <span class="title">BaseView</span>&lt;<span class="title">Presenter</span>&gt; </span>&#123;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">setLoadingIndicator</span><span class="params">(<span class="keyword">boolean</span> active)</span></span>;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">showMissingTask</span><span class="params">()</span></span>;</div><div class="line"></div><div class="line">        ...</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="class"><span class="keyword">interface</span> <span class="title">Presenter</span> <span class="keyword">extends</span> <span class="title">BasePresenter</span> </span>&#123;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">editTask</span><span class="params">()</span></span>;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">deleteTask</span><span class="params">()</span></span>;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">completeTask</span><span class="params">()</span></span>;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">activateTask</span><span class="params">()</span></span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="Activity-çš„ä½œç”¨"><a href="#Activity-çš„ä½œç”¨" class="headerlink" title="Activity çš„ä½œç”¨"></a>Activity çš„ä½œç”¨</h3><p>Activity åœ¨é¡¹ç›®ä¸­æ˜¯ä¸€ä¸ªæ§åˆ¶è€…ï¼Œè´Ÿè´£åˆ›å»º view åŠ presenter å®ä¾‹ï¼Œå¹¶å°†äºŒè€…è¿›è¡Œå…³è”ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">TaskDetailFragment taskDetailFragment = (TaskDetailFragment) getSupportFragmentManager()</div><div class="line">                .findFragmentById(R.id.contentFrame);</div><div class="line"></div><div class="line">        if (taskDetailFragment == null) &#123;</div><div class="line">            taskDetailFragment = TaskDetailFragment.newInstance(taskId);</div><div class="line"></div><div class="line">            ActivityUtils.addFragmentToActivity(getSupportFragmentManager(),</div><div class="line">                    taskDetailFragment, R.id.contentFrame);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        // Create the presenter</div><div class="line">        new TaskDetailPresenter(</div><div class="line">                taskId,</div><div class="line">                Injection.provideTasksRepository(getApplicationContext()),</div><div class="line">                taskDetailFragment);</div></pre></td></tr></table></figure></p>
<h3 id="MVP-çš„å®ç°ä¸ç»„ç»‡"><a href="#MVP-çš„å®ç°ä¸ç»„ç»‡" class="headerlink" title="MVP çš„å®ç°ä¸ç»„ç»‡"></a>MVP çš„å®ç°ä¸ç»„ç»‡</h3><ul>
<li><p>Presenter åˆ›å»ºæ—¶å°† Fragment ä½œä¸ºå‚æ•°ä¼ å…¥æ„é€ æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="title">TasksPresenter</span><span class="params">(@NonNull TasksRepository tasksRepository, @NonNull TasksContract.View tasksView)</span> </span>&#123;</div><div class="line">        mTasksRepository = checkNotNull(tasksRepository, <span class="string">"tasksRepository cannot be null"</span>);</div><div class="line">        mTasksView = checkNotNull(tasksView, <span class="string">"tasksView cannot be null!"</span>);</div><div class="line">        <span class="comment">// view è°ƒç”¨setPresenteræ–¹æ³•ï¼Œæ³¨å…¥ presenter ç¤ºä¾‹</span></div><div class="line">        mTasksView.setPresenter(<span class="keyword">this</span>);</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
</li>
<li><p>Fragment onResume() æ–¹æ³•ä¸­è°ƒç”¨ presenter.start()æ–¹æ³•</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">public class TaskDetailFragment extends Fragment implements TaskDetailContract.View &#123;</div><div class="line">    ...</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public void onResume() &#123;</div><div class="line">        super.onResume();</div><div class="line">        mPresenter.start();</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    @Override</div><div class="line">    public void setPresenter(@NonNull TaskDetailContract.Presenter presenter) &#123;</div><div class="line">        mPresenter = checkNotNull(presenter);</div><div class="line">    &#125;</div><div class="line">    ...</div></pre></td></tr></table></figure>
</li>
</ul>
<p>åˆ†æä»£ç å¾—å‡ºview å’Œ presenter ç›¸äº’æŒæœ‰ï¼Œå¹¶ä¸”é€šè¿‡æ„é€ å‡½æ•°æˆ–setæ–¹æ³•è¿›è¡Œä¾èµ–æ³¨å…¥ã€‚view å¤„ç†ç”¨æˆ·ä¸ç•Œé¢çš„äº¤äº’ï¼Œpresenterä¸modelå±‚äº¤äº’ï¼Œå¤„ç†æ•°æ®å›è°ƒçš„é€»è¾‘åˆ¤æ–­ï¼Œå¦‚æœéœ€è¦æ›´æ–°UIï¼Œç›´æ¥è°ƒç”¨viewçš„æ–¹æ³•ï¼Œå®ç°äº† view å’Œ presenter çš„å„å¸å…¶èŒã€‚</p>
<h3 id="Model-å±‚è®¾è®¡"><a href="#Model-å±‚è®¾è®¡" class="headerlink" title="Model å±‚è®¾è®¡"></a>Model å±‚è®¾è®¡</h3><p>Model æœ€å¤§çš„ç‰¹ç‚¹å°±æ˜¯è¢«èµ‹äºˆäº†è·å–æ•°æ®çš„èŒè´£ã€‚ä¸æˆ‘ä»¬å¹³å¸¸Modelåªå®šä¹‰Beanå¯¹è±¡ä¸åŒï¼Œtodo-mvpä¸­ï¼Œæ•°æ®çš„è·å–ï¼Œå­˜å‚¨ï¼Œæ•°æ®çŠ¶æ€å˜åŒ–éƒ½æ˜¯modelå±‚çš„ä»»åŠ¡ã€‚Presenter åªéœ€è¦è°ƒç”¨è¯¥å±‚çš„æ–¹æ³•å¹¶ä¼ å…¥å›è°ƒã€‚</p>
<p>æ€»ç»“ï¼šMVPéµå¾ªç±»å•ä¸€èŒè´£çš„ç¼–ç¨‹åŸåˆ™ï¼Œä½†æ˜¯ä»£ç é‡ç›¸å¯¹å¢åŠ ï¼Œè€Œä¸”viewå±‚çš„ä»£ç ä¾ç„¶ç•¥æ˜¾è‡ƒè‚¿ï¼Œxmlæ–‡ä»¶ä½œä¸ºViewå±‚çš„èƒ½åŠ›ä¾ç„¶å¾ˆå¼±ï¼ŒUIçš„æ›´æ–°ä¾ç„¶éœ€è¦å’‹Fragmentä¸­å¤„ç†ã€‚</p>
<h3 id="MVVM-ä¸-MVP-ç›¸ç»“åˆæ¶æ„åˆ†æ"><a href="#MVVM-ä¸-MVP-ç›¸ç»“åˆæ¶æ„åˆ†æ" class="headerlink" title="MVVM ä¸ MVP ç›¸ç»“åˆæ¶æ„åˆ†æ"></a>MVVM ä¸ MVP ç›¸ç»“åˆæ¶æ„åˆ†æ</h3><p>è¯¥æ¶æ„åŸºäº todo-mvp ç¤ºä¾‹å¹¶ä¸”ä½¿ç”¨äº† DataBinding åº“æ¥å±•ç¤ºæ•°æ®å’Œç»‘å®šäº‹ä»¶ã€‚<br>å®ƒå¹¶ä¸æ˜¯ä¸¥æ ¼çš„éµå®ˆ MVVM æ¨¡å‹ æˆ–è€… MVP æ¨¡å‹ï¼Œå®ƒåŒæ—¶ä½¿ç”¨äº† ViewModel å’Œ Presenter ã€‚</p>
<h4 id="app-è®¾è®¡"><a href="#app-è®¾è®¡" class="headerlink" title="app è®¾è®¡"></a>app è®¾è®¡</h4><p>ç›®å½•ç»“æ„ä¸todo-mvpä¸€è‡´ã€‚åªæ˜¯å¤šäº†ä¸€ä¸ªViewModelã€‚Statistics å’Œ tasks æ¨¡å—å®ç°ViewModelçš„æ–¹å¼å¹¶ä¸ä¸€æ ·ï¼Œæˆ‘ä»¬æ¥é€ä¸ªåˆ†æã€‚</p>
<p><img src="http://static.zybuluo.com/LeoPoldCrossing/72rwqh88tal6nq3okqgx23uu/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-03-11%2013.14.33.png" alt="å±å¹•å¿«ç…§ 2017-03-11 13.14.33.png-31.5kB"></p>
<h4 id="Statistics-æ¨¡å—"><a href="#Statistics-æ¨¡å—" class="headerlink" title="Statistics æ¨¡å—"></a>Statistics æ¨¡å—</h4><p>Statistics æ¨¡å—<br>ä¸»è¦ç±»ï¼šActivity ,Fragment ,ViewModel,Presenter</p>
<ul>
<li><p>StatisticsActivity ï¼š åˆ›å»º Fragmentï¼ŒViewModel ï¼Œ Presenterå¯¹è±¡ï¼Œç®¡ç†æ³¨å…¥ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">StatisticsFragment statisticsFragment = (StatisticsFragment) getSupportFragmentManager()</div><div class="line">    .findFragmentById(R.id.contentFrame);</div><div class="line">    <span class="keyword">if</span> (statisticsFragment == <span class="keyword">null</span>) &#123;</div><div class="line">        statisticsFragment = StatisticsFragment.newInstance();</div><div class="line">    ActivityUtils.addFragmentToActivity(getSupportFragmentManager(),</div><div class="line">                    statisticsFragment, R.id.contentFrame);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">StatisticsViewModel statisticsViewModel = <span class="keyword">new</span> StatisticsViewModel(getApplicationContext());</div><div class="line"></div><div class="line"><span class="comment">// æ³¨å…¥viewModelï¼Œç”¨äºbindingè‡³xmlæ–‡ä»¶</span></div><div class="line">statisticsFragment.setViewModel(statisticsViewModel);</div><div class="line"></div><div class="line"><span class="comment">// viewmodel å®ç° viewï¼Œ æ„é€ æ–¹æ³•æ³¨å…¥åˆ°presenter</span></div><div class="line">StatisticsPresenter statisticsPresenter = <span class="keyword">new</span> StatisticsPresenter(</div><div class="line">        Injection.provideTasksRepository(getApplicationContext()), statisticsViewModel);</div><div class="line"></div><div class="line"><span class="comment">// Fragment æ³¨å…¥ presenterã€‚</span></div><div class="line">statisticsFragment.setPresenter(statisticsPresenter);</div></pre></td></tr></table></figure>
</li>
<li><p>StatisticsFragment ï¼š è°ƒç”¨presenterçš„æ–¹æ³•è·å–æ•°æ®ï¼Œç»‘å®š viewmodel è‡³xml </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPresenter</span><span class="params">(@NonNull StatisticsPresenter presenter)</span></span>&#123;</div><div class="line">    mPresenter = checkNotNull(presenter)</div><div class="line">&#125;</div><div class="line"></div><div class="line">mViewDataBinding.setStats(mStatisticsViewModel)</div></pre></td></tr></table></figure>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">layout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">data</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">import</span> <span class="attr">type</span>=<span class="string">"android.view.View"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">variable</span></span></div><div class="line">            <span class="attr">name</span>=<span class="string">"stats"</span></div><div class="line">            <span class="attr">type</span>=<span class="string">"com.example.android.architecture.blueprints.todoapp.statistics.StatisticsViewModel"</span> /&gt;</div><div class="line">    <span class="tag">&lt;/<span class="name">data</span>&gt;</span></div><div class="line">    ...</div><div class="line"><span class="tag">&lt;/<span class="name">layout</span>&gt;</span></div></pre></td></tr></table></figure>
<ul>
<li><p>StatisticsViewModel ï¼š æä¾›get setæ–¹æ³•ï¼Œbinding åˆ° xml æ–‡ä»¶ï¼Œè‡ªåŠ¨æ›´æ–°UI</p>
</li>
<li><p>StatisticsPresenter ï¼š ä¸Model å±‚äº¤äº’ï¼Œè·å–æ•°æ®åä¼ é€’ç»™viewmodelï¼Œæ›´æ–°UI</p>
</li>
</ul>
<h4 id="Tasksæ¨¡å—"><a href="#Tasksæ¨¡å—" class="headerlink" title="Tasksæ¨¡å—"></a>Tasksæ¨¡å—</h4><p>Tasks æ¨¡å— MVP ç»“æ„çš„ç»„ç»‡ä¸å®ç°ä¸todo-mvpä¸€è‡´ã€‚<br>ä¸»è¦ç±»ï¼š TasksActivity,TasksFragment,TasksPresenter,TasksItemActionHandler,TasksViewModelã€‚</p>
<ul>
<li><p>TasksActivity ï¼šç®¡ç†ï¼Œåˆ›å»ºå¯¹è±¡</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">TasksFragment tasksFragment =</div><div class="line">            (TasksFragment) getSupportFragmentManager().findFragmentById(R.id.contentFrame);</div><div class="line">    if (tasksFragment == null) &#123;</div><div class="line">        // Create the fragment</div><div class="line">        tasksFragment = TasksFragment.newInstance();</div><div class="line">        ActivityUtils.addFragmentToActivity(</div><div class="line">                getSupportFragmentManager(), tasksFragment, R.id.contentFrame);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    // Create the presenter</div><div class="line">    mTasksPresenter = new TasksPresenter(Injection.provideTasksRepository(</div><div class="line">            getApplicationContext()), tasksFragment);</div><div class="line">    </div><div class="line">    // åˆ›å»ºæ—¶æ³¨å…¥Presenterï¼Œæ˜¯ä¸ºäº†æ–¹æ³•çš„é‡ç”¨ã€‚</div><div class="line">    TasksViewModel tasksViewModel =</div><div class="line">            new TasksViewModel(getApplicationContext(), mTasksPresenter);</div><div class="line">    // æ³¨å…¥viewModelï¼Œé€šè¿‡Bindingç±»ä¸xmlæ–‡ä»¶å…³è”</div><div class="line">    tasksFragment.setViewModel(tasksViewModel);</div></pre></td></tr></table></figure>
</li>
<li><p>TasksFragment : View å±‚ï¼ŒæŒæœ‰ViewModel å’Œ Presenterã€‚å°†ViewModelç»‘å®šè‡³xmlæ–‡ä»¶ï¼Œæ ¹æ®æ•°æ®è‡ªåŠ¨æ›´æ–°UIï¼Œè°ƒç”¨Presenterçš„æ–¹æ³•è·å–æˆ–æ›´æ–°æ•°æ®ï¼Œå¤„ç†ç”¨æˆ·å’Œç»„ä»¶çš„äº¤äº’ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">TasksFragBinding tasksFragBinding = TasksFragBinding.inflate(inflater, container, false);</div><div class="line">// ç»‘å®šviewmodel å’Œ xmlæ–‡ä»¶ï¼Œè‡ªåŠ¨æ›´æ–°UIã€‚</div><div class="line">tasksFragBinding.setTasks(mTasksViewModel);</div><div class="line">// å°†presenterä¸xmlç»‘å®šï¼Œä½œä¸ºäº‹ä»¶å¤„ç†ç±»ï¼Œé‡ç”¨æ–¹æ³•</div><div class="line">tasksFragBinding.setActionHandler(mPresenter);</div></pre></td></tr></table></figure>
</li>
<li><p>TasksPresenter : å’Œ todo-mvp çš„presenter æ²¡ä»€ä¹ˆåŒºåˆ«ï¼Œè·å–æ•°æ®ï¼Œç„¶åè°ƒç”¨viewçš„æ–¹æ³•ï¼Œæ›´æ–°UIã€‚</p>
</li>
<li><p>TasksViewModel : ç»§æ‰¿BaseObservableï¼Œåœ¨ä¸Xmlæ–‡ä»¶ç»‘å®šåï¼Œå†…å®¹å‘ç”Ÿæ”¹å˜æ—¶åˆ»è‡ªåŠ¨æ›´æ–°UIã€‚<br>æ³¨æ„ <code>@Bindable</code> æ³¨è§£å’Œ <code>notifyPropertyChanged()</code>çš„ä½¿ç”¨; </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div></pre></td><td class="code"><pre><div class="line">public class TasksViewModel extends BaseObservable &#123;</div><div class="line"></div><div class="line">    int mTaskListSize = 0;</div><div class="line"></div><div class="line">    private final TasksContract.Presenter mPresenter;</div><div class="line"></div><div class="line">    private Context mContext;</div><div class="line"></div><div class="line">    public TasksViewModel(Context context, TasksContract.Presenter presenter) &#123;</div><div class="line">        mContext = context;</div><div class="line">        mPresenter = presenter;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Bindable</div><div class="line">    public String getCurrentFilteringLabel() &#123;</div><div class="line">        switch (mPresenter.getFiltering()) &#123;</div><div class="line">            case ALL_TASKS:</div><div class="line">                return mContext.getResources().getString(R.string.label_all);</div><div class="line">            case ACTIVE_TASKS:</div><div class="line">                return mContext.getResources().getString(R.string.label_active);</div><div class="line">            case COMPLETED_TASKS:</div><div class="line">                return mContext.getResources().getString(R.string.label_completed);</div><div class="line">        &#125;</div><div class="line">        return null;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Bindable</div><div class="line">    public String getNoTasksLabel() &#123;</div><div class="line">        switch (mPresenter.getFiltering()) &#123;</div><div class="line">            case ALL_TASKS:</div><div class="line">                return mContext.getResources().getString(R.string.no_tasks_all);</div><div class="line">            case ACTIVE_TASKS:</div><div class="line">                return mContext.getResources().getString(R.string.no_tasks_active);</div><div class="line">            case COMPLETED_TASKS:</div><div class="line">                return mContext.getResources().getString(R.string.no_tasks_completed);</div><div class="line">        &#125;</div><div class="line">        return null;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Bindable</div><div class="line">    public Drawable getNoTaskIconRes() &#123;</div><div class="line">        switch (mPresenter.getFiltering()) &#123;</div><div class="line">            case ALL_TASKS:</div><div class="line">                return mContext.getResources().getDrawable(R.drawable.ic_assignment_turned_in_24dp);</div><div class="line">            case ACTIVE_TASKS:</div><div class="line">                return mContext.getResources().getDrawable(R.drawable.ic_check_circle_24dp);</div><div class="line">            case COMPLETED_TASKS:</div><div class="line">                return mContext.getResources().getDrawable(R.drawable.ic_verified_user_24dp);</div><div class="line">        &#125;</div><div class="line">        return null;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Bindable</div><div class="line">    public boolean getTasksAddViewVisible() &#123;</div><div class="line">        return mPresenter.getFiltering() == ALL_TASKS;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Bindable</div><div class="line">    public boolean isNotEmpty() &#123;</div><div class="line">        return mTaskListSize &gt; 0;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void setTaskListSize(int taskListSize) &#123;</div><div class="line">        mTaskListSize = taskListSize;</div><div class="line">        notifyPropertyChanged(BR.noTaskIconRes);</div><div class="line">        notifyPropertyChanged(BR.noTasksLabel);</div><div class="line">        notifyPropertyChanged(BR.currentFilteringLabel);</div><div class="line">        notifyPropertyChanged(BR.notEmpty);</div><div class="line">        notifyPropertyChanged(BR.tasksAddViewVisible);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>TasksItemActionHandler : ç»‘å®šè‡³xmlæ–‡ä»¶ï¼Œé€šè¿‡setæ–¹æ³•æ³¨å…¥ï¼Œä¼ å…¥Presenterï¼Œå¯ä»¥é‡ç”¨æ–¹æ³•ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">public class TasksItemActionHandler &#123;</div><div class="line"></div><div class="line">    private TasksContract.Presenter mListener;</div><div class="line"></div><div class="line">    public TasksItemActionHandler(TasksContract.Presenter listener) &#123;</div><div class="line">        mListener = listener;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * Called by the Data Binding library when the checkbox is toggled.</div><div class="line">     */</div><div class="line">    public void completeChanged(Task task, boolean isChecked) &#123;</div><div class="line">        if (isChecked) &#123;</div><div class="line">            mListener.completeTask(task);</div><div class="line">        &#125; else &#123;</div><div class="line">            mListener.activateTask(task);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * Called by the Data Binding library when the row is clicked.</div><div class="line">     */</div><div class="line">    public void taskClicked(Task task) &#123;</div><div class="line">        mListener.openTaskDetails(task);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<p>æ€»ç»“ï¼šè¯¥æ¶æ„èŠ‚çœå»äº†findViewByIdçš„è‹¦åŠ›æ´»ï¼Œé€šè¿‡Bindingåº“å’ŒViewModelå±‚å¢å¼ºäº†XMlçš„åŠŸèƒ½ã€‚<br>ç›¸æ¯”MVPï¼Œviewå±‚ä¸­çš„ä»£ç å‡å°‘ï¼ŒUIå±•å¼æ”¹å˜åªéœ€æ”¹å˜ViewModelå±‚ã€‚<br>é¡¹ç›®MVVMï¼Œä¸šåŠ¡é€»è¾‘ä»£ç æ”¾åœ¨äº†Presenterä¸­ï¼Œæ˜ç¡®äº†å„å±‚çš„èŒè´£ã€‚<br>è¿™ä¹Ÿæ˜¯æˆ‘æ¯”è¾ƒå€¾å‘åœ¨é¡¹ç›®ä¸­ä½¿ç”¨çš„æ¶æ„ã€‚</p>
<h1 id="å†™åœ¨æœ€å"><a href="#å†™åœ¨æœ€å" class="headerlink" title="å†™åœ¨æœ€å"></a>å†™åœ¨æœ€å</h1><p>ä½œä¸ºç¨‹åºçŒ¿ï¼Œçº¸ä¸Šæ¥çš„ç»ˆè§‰æµ…ï¼Œæ—¢ç„¶è§‰å¾—æµ…äº†ï¼Œå’±ä»¬å°±å»ç©ä¸€äº›æ·±çš„ï¼Œè‡ªå·±å»å®ç°ä»¥ä¸‹MVCï¼ŒMVPï¼ŒMVVMã€‚å®è·µå‡ºçœŸçŸ¥ï¼ŒçœŸæ­£çš„ç†è§£è¿™ä¸‰ç§æ¶æ„ã€‚æ•¬è¯·æœŸå¾…~</p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt; MVC,MVP,MVVM ä½œä¸º Android å¼€å‘ä¸­è€³ç†Ÿèƒ½è¯¦çš„ä¸‰ä¸ªæ¡†æ¶ï¼Œä¸€ç›´å¤„åŠæ‡µé€¼çš„çŠ¶æ€ï¼Œæœ€è¿‘åˆ†æäº†ä¸€äº›è°·æ­Œå®˜æ–¹ç»™å‡ºçš„samplesä»£ç ï¼Œè®°å½•ä¸‹è‡ªå·±çš„ç†è§£ï¼Œè½»å–·~&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Android" scheme="http://yoursite.com/categories/Android/"/>
    
    
      <category term="æ¶æ„åˆ†æ" scheme="http://yoursite.com/tags/%E6%9E%B6%E6%9E%84%E5%88%86%E6%9E%90/"/>
    
  </entry>
  
  <entry>
    <title>DataBinding- Say Goodye to FindViewById</title>
    <link href="http://yoursite.com/2017/02/17/DataBinding%E4%BB%8B%E7%BB%8D/"/>
    <id>http://yoursite.com/2017/02/17/DataBindingä»‹ç»/</id>
    <published>2017-02-17T01:55:48.000Z</published>
    <updated>2017-02-22T09:11:57.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="DataBindingä»‹ç»"><a href="#DataBindingä»‹ç»" class="headerlink" title="DataBindingä»‹ç»"></a>DataBindingä»‹ç»</h1><p>Data binding åœ¨2015å¹´7æœˆå‘å¸ƒçš„Android Studio v1.3.0 ç‰ˆæœ¬ä¸Šå¼•å…¥ï¼Œåœ¨2016å¹´4æœˆAndroid Studio v2.0.0 ä¸Šæ­£å¼æ”¯æŒã€‚ç›®å‰ä¸ºæ­¢ï¼ŒData Binding å·²ç»æ”¯æŒåŒå‘ç»‘å®šäº†ã€‚</p>
<p>Databinding æ˜¯ä¸€ä¸ªå®ç°æ•°æ®å’ŒUIç»‘å®šçš„æ¡†æ¶ï¼Œæ˜¯ä¸€ä¸ªå®ç° MVVM æ¨¡å¼çš„å·¥å…·ï¼Œæœ‰äº† Data Bindingï¼Œåœ¨Androidä¸­ä¹Ÿå¯ä»¥å¾ˆæ–¹ä¾¿çš„å®ç°MVVMå¼€å‘æ¨¡å¼ã€‚</p>
<p>Data Binding æ˜¯ä¸€ä¸ªsupportåº“ï¼Œæœ€ä½æ”¯æŒåˆ°Android 2.1ï¼ˆAPI Level 7+ï¼‰ã€‚</p>
<a id="more"></a>
<p>Data Binding ä¹‹å‰ï¼Œæˆ‘ä»¬ä¸å¯é¿å…åœ°è¦ç¼–å†™å¤§é‡çš„æ¯«æ— è¥å…»çš„ä»£ç ï¼Œå¦‚ findViewById()ã€setText()ï¼ŒsetVisibility()ï¼ŒsetEnabled() æˆ– setOnClickListener() ç­‰ï¼Œé€šè¿‡ Data Binding , æˆ‘ä»¬å¯ä»¥é€šè¿‡å£°æ˜å¼å¸ƒå±€ä»¥ç²¾ç®€çš„ä»£ç æ¥ç»‘å®šåº”ç”¨ç¨‹åºé€»è¾‘å’Œå¸ƒå±€ï¼Œè¿™æ ·å°±ä¸ç”¨ç¼–å†™å¤§é‡çš„æ¯«æ— è¥å…»çš„ä»£ç äº†ã€‚</p>
<p>æ–‡ä¸­çš„ç¤ºä¾‹ä»£ç åœ°å€<a href="https://github.com/LeoPoldCrossing/DataBindingSamples" target="_blank" rel="external">DataBindingSamples</a></p>
<hr>
<h1 id="DataBindingç®€å•ä½¿ç”¨ç¤ºä¾‹"><a href="#DataBindingç®€å•ä½¿ç”¨ç¤ºä¾‹" class="headerlink" title="DataBindingç®€å•ä½¿ç”¨ç¤ºä¾‹"></a>DataBindingç®€å•ä½¿ç”¨ç¤ºä¾‹</h1><h2 id="DataBindingç¯å¢ƒ"><a href="#DataBindingç¯å¢ƒ" class="headerlink" title="DataBindingç¯å¢ƒ"></a>DataBindingç¯å¢ƒ</h2><p>App Module - build.gradleä¸­å¼€å¯dataBinding<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">android&#123;</div><div class="line">    ...</div><div class="line">    dataBinding&#123;</div><div class="line">        enable = true</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="ä¿®æ”¹Layoutæ–‡ä»¶"><a href="#ä¿®æ”¹Layoutæ–‡ä»¶" class="headerlink" title="ä¿®æ”¹Layoutæ–‡ä»¶"></a>ä¿®æ”¹Layoutæ–‡ä»¶</h2><p>ä½¿ç”¨dataBingdingéœ€è¦ä¿®æ”¹Layoutæ–‡ä»¶ï¼Œæ ¹æ ‡ç­¾ä¸å†æ˜¯çº¿æ€§å¸ƒå±€ï¼Œç›¸å¯¹å¸ƒå±€ç­‰ï¼Œè€Œæ˜¯ä½¿ç”¨layoutæ ‡ç­¾<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">&lt;layout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</div><div class="line">        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;</div><div class="line">        xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;</div><div class="line">        &lt;!-- åŸæ ¹èŠ‚ç‚¹ --&gt;</div><div class="line">        &lt;LinearLayout&gt;</div><div class="line">        ...</div><div class="line">        &lt;/LinearLayout&gt;</div><div class="line">&lt;/layout&gt;</div></pre></td></tr></table></figure></p>
<h2 id="æ•°æ®å¯¹è±¡"><a href="#æ•°æ®å¯¹è±¡" class="headerlink" title="æ•°æ®å¯¹è±¡"></a>æ•°æ®å¯¹è±¡</h2><p>å°±æ˜¯ä¸€ä¸ªModelï¼Œå°±ä¸è´´ä»£ç äº†</p>
<h2 id="UIç»‘å®š"><a href="#UIç»‘å®š" class="headerlink" title="UIç»‘å®š"></a>UIç»‘å®š</h2><ul>
<li>ä¿®æ”¹å¸ƒå±€æ–‡ä»¶,å®šä¹‰variable</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">&lt;layout</div><div class="line">    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</div><div class="line">    xmlns:tools=&quot;http://schemas.android.com/tools&quot;</div><div class="line">    &gt;</div><div class="line">    &lt;data&gt;</div><div class="line">    </div><div class="line">        &lt;variable</div><div class="line">            name=&quot;user&quot;</div><div class="line">            type=&quot;com.example.databindingsamples.model.User&quot; /&gt;</div><div class="line">        # ä¹Ÿå¯ä»¥å†™æˆ</div><div class="line">        &lt;import type=&quot;com.example.databindingsamples.model.User&quot; /&gt;</div><div class="line">        &lt;variable name=&quot;user&quot; type=&quot;User&quot; /&gt;</div><div class="line">        </div><div class="line">    &lt;/data&gt;</div><div class="line">...</div><div class="line"></div><div class="line">    &lt;TextView</div><div class="line">            ...</div><div class="line">            # ä½¿ç”¨ variable</div><div class="line">            android:text=&quot;@&#123;user.firstName&#125;&quot;</div><div class="line">            ...</div><div class="line">            /&gt;</div><div class="line"></div><div class="line">        &lt;TextView</div><div class="line">            ...</div><div class="line">            android:text=&quot;@&#123;user.lastName&#125;&quot;</div><div class="line">            ... /&gt;</div><div class="line">         &lt;TextView</div><div class="line">            ...</div><div class="line">            android:visibility=&quot;@&#123;!user.adult ? View.VISIBLE:View.GONE&#125;&quot;</div><div class="line">            ... /&gt;</div><div class="line">&lt;/layout&gt;</div></pre></td></tr></table></figure>
<ul>
<li><p>ç»‘å®š variable<br>ä¿®æ”¹<code>onCreate</code>æ–¹æ³• ä½¿ç”¨<code>DataBingdingUtil.setContentView</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">protected void onCreate(@Nullable Bundle savedInstanceState) &#123;</div><div class="line">    super.onCreate(savedInstanceState);</div><div class="line">    ActivityBasicBinding binding = DataBindingUtil.setContentView(this, R.layout.activity_basic);</div><div class="line">    User user = new User(&quot;leo&quot;, &quot;wang&quot;, 20);</div><div class="line">    binding.setUser(user);</div><div class="line">    # æˆ–è€…ä½¿ç”¨setVariable()</div><div class="line">    binding.setVariable(BR.user,user)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p><code>ActivityBasicBinding</code>ç±»æ˜¯è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œæ‰€æœ‰çš„<code>set</code>æ–¹æ³•ä¹Ÿæ˜¯æ ¹æ®<code>variable</code>åç§°ç”Ÿæˆçš„ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># ç±»åç”Ÿæˆ</div><div class="line">activity_basic.xml -&gt; ActivityBasicBinding</div><div class="line"># setæ–¹æ³•ç”Ÿæˆ</div><div class="line">user -&gt; setUser(User user)</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="äº‹ä»¶ç»‘å®š"><a href="#äº‹ä»¶ç»‘å®š" class="headerlink" title="äº‹ä»¶ç»‘å®š"></a>äº‹ä»¶ç»‘å®š</h2><h3 id="åˆ›å»ºä»£ç†ç±»"><a href="#åˆ›å»ºä»£ç†ç±»" class="headerlink" title="åˆ›å»ºä»£ç†ç±»"></a>åˆ›å»ºä»£ç†ç±»</h3><p>å…ˆæ¥åˆ›å»ºä¸€ä¸ªäº‹ä»¶çš„å¤„ç†ç±»ï¼Œå¹¶åœ¨<code>layout</code>æ–‡ä»¶ä¸­å£°æ˜ã€‚<br>çŸ¥é“å¤§å®¶éƒ½æ˜¯å¥½å¥‡å®å®ï¼Œå…ˆå¿ä¼šå“ˆ~<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">public class EventHandler &#123;</div><div class="line">    public void onDisplayNameClick(View view) &#123;</div><div class="line">        Toast.makeText(view.getContext(), &quot;DisplayName : &quot; + user.getDisplayName(), Toast.LENGTH_SHORT).show();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void onFirstNameClick(User user) &#123;</div><div class="line">        Toast.makeText(BasicActivity.this, &quot;FirstName : &quot; + user.getFirstName(), Toast.LENGTH_SHORT).show();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void onLastNameClick(View view, User user) &#123;</div><div class="line">        Toast.makeText(BasicActivity.this, &quot;LastName : &quot; + user.getLastName(), Toast.LENGTH_SHORT).show();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void onAgeClick(View view) &#123;</div><div class="line">        if (user.getAge() &gt; 18) &#123;</div><div class="line">            user.setAge(16);</div><div class="line">        &#125; else &#123;</div><div class="line">            user.setAge(28);</div><div class="line">        &#125;</div><div class="line">        binding.setUser(user);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="Method-Reference"><a href="#Method-Reference" class="headerlink" title="Method Reference"></a>Method Reference</h3><p>äº‹ä»¶ç»‘å®š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">android:onClick=&quot;@&#123;handler.onDisplayNameClick&#125;&quot;</div></pre></td></tr></table></figure></p>
<blockquote>
<p>Tip:å¼•ç”¨çš„æ–¹æ³•å‚æ•°å¿…é¡»å’Œäº‹ä»¶å›è°ƒå‚æ•°ä¸€è‡´<br>æ¯”å¦‚ android:onClick , å¼•ç”¨çš„æ–¹æ³•å‚æ•°å¿…é¡»ä¸ºï¼ˆView viewï¼‰</p>
</blockquote>
<h3 id="Listener-Binding"><a href="#Listener-Binding" class="headerlink" title="Listener Binding"></a>Listener Binding</h3><p>ç›‘å¬å™¨ç»‘å®š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">android:onClick=&quot;@&#123;()-&gt; handler.onFirstNameClick(user)&#125;&quot;</div><div class="line"></div><div class="line">android:onClick=&quot;@&#123;(view)-&gt; handler.onLastNameClick(view,user)&#125;&quot;</div></pre></td></tr></table></figure></p>
<blockquote>
<p>Tip: å¯è‡ªå®šä¹‰ä¼ é€’å‚æ•°</p>
</blockquote>
<h3 id="ç»‘å®š-handler"><a href="#ç»‘å®š-handler" class="headerlink" title="ç»‘å®š handler"></a>ç»‘å®š handler</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">binding.setHandler(new EventHandler());)</div></pre></td></tr></table></figure>
<h1 id="å¸ƒå±€ç»†èŠ‚"><a href="#å¸ƒå±€ç»†èŠ‚" class="headerlink" title="å¸ƒå±€ç»†èŠ‚"></a>å¸ƒå±€ç»†èŠ‚</h1><h2 id="Imports"><a href="#Imports" class="headerlink" title="Imports"></a>Imports</h2><ul>
<li>Javaä»£ç ä¸­ä¸€æ ·åœ¨xmlæ–‡ä»¶ä¸­ import class <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;data&gt;</div><div class="line">    &lt;imports type=&quot;android.view.View&quot;/&gt;</div><div class="line">&lt;/data&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;TextView</div><div class="line">    android:visibility=&quot;@&#123;user.isAdult?View.VISIBLE:View.GONE&#125;&quot;</div><div class="line">/&gt;</div></pre></td></tr></table></figure>
<ul>
<li><p>ç±»å‹åˆ«å<br>å¦‚æœåœ¨dataèŠ‚ç‚¹å¯¼å…¥ä¸¤ä¸ªåŒåç±»ï¼Œä½¿ç”¨<code>alias</code>å±æ€§ï¼Œç»™ç±»èµ‹ä¸€ä¸ªåˆ«å</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;import type=&quot;com.example.home.data.User&quot; /&gt;</div><div class="line">&lt;import type=&quot;com.examle.detail.data.User&quot; alias=&quot;DetailUser&quot; /&gt;</div><div class="line">&lt;variable name=&quot;detailUser&quot; type=&quot;DetailUser&quot; /&gt;</div><div class="line">&lt;variable name=&quot;user&quot; type=&quot;User&quot; /&gt;</div></pre></td></tr></table></figure>
</li>
<li><p>è¡¨è¾¾å¼ä½¿ç”¨å¯¼å…¥çš„ç±»å‹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">&lt;data&gt;</div><div class="line">    &lt;import type=&quot;com.example.User&quot;/&gt;</div><div class="line">    &lt;import type=&quot;java.util.List&quot;/&gt;</div><div class="line">    &lt;variable name=&quot;user&quot; type=&quot;User&quot;/&gt;</div><div class="line">    &lt;variable name=&quot;userList&quot; type=&quot;List&amp;lt;User&amp;gt&quot;/&gt;</div><div class="line">&lt;/data&gt;</div></pre></td></tr></table></figure>
</li>
<li><p>é™æ€å­—æ®µå’Œæ–¹æ³•:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;data&gt;</div><div class="line">     &lt;import type=&quot;com.example.databindingsamples.utils.MyStringUtils&quot; alias=&quot;StringUtil&quot;/&gt;</div><div class="line">&lt;/data&gt;</div><div class="line">â€¦</div><div class="line">&lt;TextView</div><div class="line">   android:text=&quot;@&#123;MyStringUtils.capitalize(user.lastName)&#125;&quot;</div><div class="line">   android:layout_width=&quot;wrap_content&quot;</div><div class="line">   android:layout_height=&quot;wrap_content&quot;/&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="Variables"><a href="#Variables" class="headerlink" title="Variables"></a>Variables</h2><p><code>data</code> æ ‡ç­¾ä¸‹å¯ä»¥å®šä¹‰ä»»æ„æ•°é‡çš„ <code>variable</code> æ ‡ç­¾ï¼Œæ¯ä¸€ä¸ª<code>variable</code>æ ‡ç­¾éƒ½æè¿°ä¸€ä¸ªå¯ä»¥åœ¨bindingè¡¨è¾¾å¼ä¸­ä½¿ç”¨çš„å˜é‡ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;data&gt;</div><div class="line">    &lt;import type=&quot;android.graphics.drawable.Drawable&quot;/&gt;</div><div class="line">    &lt;variable name=&quot;user&quot; type=&quot;com.example.User&quot;/&gt;</div><div class="line">    &lt;variable name=&quot;image&quot; type=&quot;Drawable&quot;/&gt;</div><div class="line">    &lt;variable name=&quot;note&quot; type=&quot;String&quot;/&gt;</div><div class="line">&lt;/data&gt;</div></pre></td></tr></table></figure></p>
<p>å˜é‡ç±»å‹ä¼šåœ¨ç¼–è¯‘æ—¶æ£€æŸ¥ï¼Œæ‰€ä»¥å¦‚æœä¸€ä¸ªå˜é‡å®ç°äº†äº†Observable æˆ–è€… æ˜¯ä¸€ä¸ª Observable é›†åˆï¼Œå®ƒä¼šè¢«åå°„è°ƒç”¨ã€‚</p>
<p>å¦‚æœå˜é‡å£°æ˜çš„æ˜¯ä¸€ä¸ªæœªå®ç°çš„ObservableåŸºç±»æˆ–è€…æ¥å£ï¼Œè¯¥å˜é‡ä¸ä¼šè¢«è§‚å¯Ÿï¼Œä¹Ÿå°±æ˜¯å˜é‡çš„æ”¹åŠ¨ä¸ä¼šæ”¹å˜UIã€‚</p>
<p>binding ç±»è‡ªåŠ¨ç”Ÿæˆä¼šä¸ºæ¯ä¸€ä¸ªå˜é‡è‡ªåŠ¨ç”Ÿæˆ getter å’Œ setter æ–¹æ³•ã€‚åœ¨ setter æ–¹æ³•æ²¡æœ‰è°ƒç”¨ä¹‹å‰ï¼Œä»–ä»¬éƒ½è¢«è®¾ç½®ä¸ºé»˜è®¤å€¼ï¼šObject è®¾ç½®ä¸º null ï¼Œ int è®¾ç½®ä¸º 0 ï¼Œ boolean è®¾ç½®ä¸º false ç­‰ç­‰ã€‚ã€‚ã€‚</p>
<h2 id="Bindingç±»è‡ªå®šä¹‰"><a href="#Bindingç±»è‡ªå®šä¹‰" class="headerlink" title="Bindingç±»è‡ªå®šä¹‰"></a>Bindingç±»è‡ªå®šä¹‰</h2><ul>
<li><p>è‡ªå®šä¹‰ç±»å</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># ç”Ÿæˆçš„bindingç±»ä½äºdatabindingåŒ…ä¸‹</div><div class="line">&lt;!--&lt;data class=&quot;ContactBinding&quot;&gt;--&gt;</div></pre></td></tr></table></figure>
</li>
<li><p>è‡ªå®šä¹‰ç±»åï¼Œå¹¶ä¿®æ”¹ç”Ÿæˆè·¯å¾„</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;!--&lt;data class=&quot;.ContactBinding&quot;&gt;--&gt;</div></pre></td></tr></table></figure>
</li>
<li><p>è‡ªå®šä¹‰ç±»åå’Œç”Ÿæˆè·¯å¾„</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;data class=&quot;com.example.databindingsamples.ContactBinding&quot;&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="Includes"><a href="#Includes" class="headerlink" title="Includes"></a>Includes</h2><p>åœ¨ä½¿ç”¨åº”ç”¨å‘½åç©ºé—´çš„å¸ƒå±€ä¸­ï¼Œå˜é‡å¯ä»¥ä¼ é€’åˆ°ä»»ä½• include å¸ƒå±€ä¸­ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"># Rootæ·»åŠ å‘½åç©ºé—´</div><div class="line">xmlns:bind=&quot;http://schemas.android.com/apk/res-auto</div><div class="line"># ç»‘å®šæ•°æ®</div><div class="line"></div><div class="line">&lt;include</div><div class="line">    android:id=&quot;@+id/layout_user&quot;</div><div class="line">    layout=&quot;@layout/include_user&quot;</div><div class="line">    bind:user=&quot;@&#123;user&#125;&quot; /&gt;</div></pre></td></tr></table></figure></p>
<blockquote>
<p>Tipï¼š</p>
<ol>
<li>éœ€è¦æ³¨æ„çš„æ˜¯<code>user</code>å˜é‡å¿…é¡»åœ¨ include çš„å¸ƒå±€ä¸­å£°æ˜ã€‚</li>
<li>å¦‚æœåœ¨éæ ¹èŠ‚ç‚¹çš„ ViewGroup ä¸­ä½¿ç”¨ include ä¼šå¯¼è‡´ crash</li>
</ol>
</blockquote>
<h2 id="ViewStubs"><a href="#ViewStubs" class="headerlink" title="ViewStubs"></a>ViewStubs</h2><blockquote>
<p>ViewStub æ˜¯ä¸€ç§ä¸å¯è§çš„ï¼Œ0å°ºå¯¸åœ¨è¿è¡Œæ—¶æ‡’åŠ è½½çš„Viewã€‚å½“å…¶è®¾ç½®ä¸ºvisibleæˆ–è€…è°ƒç”¨äº†inflate()æ–¹æ³•æ—¶ï¼Œå®ƒä¼šè¢«åŠ è½½å®Œæˆçš„viewæˆ–è€…viewsæ›¿æ¢æ‰ã€‚å› æ­¤ï¼ŒViewStub åœ¨ setVisibility(int) æˆ–è€… inflate() æ–¹æ³•è¢«è°ƒç”¨ååœ¨ hierarchy ä¸­å°±ä¸å­˜åœ¨äº†ã€‚åŠ è½½åçš„ view ä¼šè¢«æ·»åŠ åˆ°Viewstubçš„çˆ¶å®¹å™¨ä¸­ï¼Œå¹¶ä¸”å‚æ•°ä¸ºViewStubçš„å¸ƒå±€å‚æ•°ã€‚ </p>
</blockquote>
<p>å› ä¸º ViewStub ä¼šè¢«ç§»é™¤ï¼Œä¸” Binding ç±»ä¸­çš„ View å…¨éƒ¨éƒ½æ˜¯ final ä¿®é¥°ï¼Œæ‰€ä»¥ Binding ç±»ä¸­ä½¿ç”¨ ViewStubProxy æ¥ä»£æ›¿ ViewStubï¼Œ å¼€å‘è€…å¯ä»¥é€šè¿‡ ViewStubProxy æ¥è·å– viewStub æˆ–è€… viewstub å¡«å……åçš„ viewã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">this.viewstub = new android.databinding.ViewStubProxy((android.view.ViewStub) bindings[1]);</div></pre></td></tr></table></figure></p>
<p>inflate ä¸€ä¸ªæ–°çš„ layout æ—¶ï¼Œä¼šä¸ºæ–°çš„ layout åˆ›å»ºä¸€ä¸ªæ–° binding å¯¹è±¡ã€‚å› æ­¤ï¼ŒViewStubProxy å¿…é¡»ç›‘å¬ ViewStub çš„ ViewStub.OnInflateListenerï¼Œå¹¶åŠæ—¶å»ºç«‹ bindingã€‚ç”±äº ViewStub åªèƒ½æœ‰ä¸€ä¸ª OnInflateListenerï¼Œä½ å¯ä»¥å°†ä½ è‡ªå·±çš„ listener è®¾ç½®åœ¨ ViewStubProxy ä¸Šï¼Œåœ¨ binding å»ºç«‹ä¹‹åï¼Œ listener å°±ä¼šè¢«è§¦å‘ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">binding.viewStub.setOnInflateListener(new ViewStub.OnInflateListener() &#123;</div><div class="line">            @Override</div><div class="line">            public void onInflate(ViewStub stub, View inflated) &#123;</div><div class="line">                ViewStubBinding viewStubBinding = DataBindingUtil.bind(inflated);</div><div class="line">                Contact contact = new Contact(&quot;Messi&quot;, &quot;122134567&quot;, &quot;2345@gmail.com&quot;);</div><div class="line">                viewStubBinding.setContact(contact);</div><div class="line">            &#125;</div><div class="line">        &#125;);</div></pre></td></tr></table></figure></p>
<h1 id="è¡¨è¾¾å¼"><a href="#è¡¨è¾¾å¼" class="headerlink" title="è¡¨è¾¾å¼"></a>è¡¨è¾¾å¼</h1><h2 id="Common-Features"><a href="#Common-Features" class="headerlink" title="Common Features"></a>Common Features</h2><ul>
<li>æ•°å­¦è®¡ç®— <code>+ - * %</code></li>
<li>å­—ç¬¦ä¸²é“¾æ¥ <code>+</code> </li>
<li>é€»è¾‘ <code>|| &amp;&amp;</code></li>
<li>äºŒè¿›åˆ¶ <code>&amp; | ^</code></li>
<li>ä¸€å…ƒ <code>+ - ! ~</code></li>
<li>ä½ç§» <code>&gt;&gt; &gt;&gt;&gt; &lt;&lt; &lt;&lt;&lt;</code></li>
<li>æ¯”è¾ƒ <code>&gt; &lt; &gt;= &lt;= ==</code></li>
<li>instance of</li>
<li>Grouping()</li>
<li>å­—é¢é‡ <code>å­—ç¬¦ å­—ç¬¦ä¸² æ•°å­— null</code></li>
<li>ç±»å‹è½¬æ¢</li>
<li>æ–¹æ³•è°ƒç”¨ ä½¿ç”¨<code>.</code>æˆ–è€… <code>::</code></li>
<li>Field è®¿é—® </li>
<li>Array è®¿é—®</li>
<li>ä¸‰å…ƒè¿ç®—ç¬¦<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Examples:</div><div class="line">android:text=&quot;@&#123;String.valueOf(index + 1)&#125;&quot;</div><div class="line">android:visibility=&quot;@&#123;age&lt;13?View.GONE:View.VISIBLE&#125;&quot;</div><div class="line">android:transitionName=&apos;@&#123;&quot;image_&quot; + id&#125;&apos;</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="ç¼ºå¤±çš„æ“ä½œç¬¦"><a href="#ç¼ºå¤±çš„æ“ä½œç¬¦" class="headerlink" title="ç¼ºå¤±çš„æ“ä½œç¬¦"></a>ç¼ºå¤±çš„æ“ä½œç¬¦</h2><ul>
<li><code>this</code></li>
<li><code>super</code></li>
<li><code>new</code> </li>
<li>æ˜¾ç¤ºæ³›å‹è°ƒç”¨<code>&lt;T&gt;</code></li>
<li>ç¼ºçœ æ— æ³•è®¿é—® this,super,newï¼Œæ˜¾ç¤ºæ³›å‹è°ƒç”¨</li>
</ul>
<h2 id="Null-åˆå¹¶è¿ç®—ç¬¦"><a href="#Null-åˆå¹¶è¿ç®—ç¬¦" class="headerlink" title="Null åˆå¹¶è¿ç®—ç¬¦"></a>Null åˆå¹¶è¿ç®—ç¬¦</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">android:text=&apos;@&#123;user.displayName ?? &quot;displayName is null&quot;&#125;&apos;</div><div class="line">ç­‰åŒäº</div><div class="line">android:text=&apos;@&#123;user.displayName != null ? user.displayName : &quot;displayName is null&quot;&#125;&apos;</div></pre></td></tr></table></figure>
<h2 id="å±æ€§å¼•ç”¨"><a href="#å±æ€§å¼•ç”¨" class="headerlink" title="å±æ€§å¼•ç”¨"></a>å±æ€§å¼•ç”¨</h2><p>JavaBean å¼•ç”¨ï¼Œå½“è¡¨è¾¾å¼å¼•ç”¨äº†ä¸€ä¸ªç±»å†…çš„å±æ€§æ—¶ï¼Œä»–ä¼šå°è¯•ç›´æ¥è°ƒç”¨åŸŸï¼Œgetterï¼Œè¿˜æœ‰ObservableFields<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">android:text=&quot;@&#123;user.firstName&#125;&quot;</div></pre></td></tr></table></figure></p>
<h2 id="é¿å…-NullPointerException"><a href="#é¿å…-NullPointerException" class="headerlink" title="é¿å… NullPointerException"></a>é¿å… NullPointerException</h2><p>è‡ªåŠ¨ç”Ÿæˆçš„ data binding ä»£ç ä¼šè‡ªåŠ¨æ£€æŸ¥å’Œé¿å… NullPointerException.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">@&#123;user.name&#125;</div><div class="line">å¦‚æœ user ä¸º nullï¼Œåˆ™ user.name èµ‹äºˆé»˜è®¤å€¼ null</div><div class="line">@&#123;user.age&#125; </div><div class="line">å¦‚æœ user ä¸º nullï¼Œåˆ™ user.age èµ‹äºˆé»˜è®¤å€¼ 0</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"># åˆ†æActivityMainBinding æºç ï¼Œçœ‹åˆ°æœ‰å¯¹useræ˜¯å¦ä¸ºnullçš„åˆ¤æ–­</div><div class="line">if ((dirtyFlags &amp; 0x6L) != 0) &#123;</div><div class="line">    if (user != null) &#123;</div><div class="line">        // read user.firstName</div><div class="line">        firstNameUser = user.getFirstName();</div><div class="line">        // read user.lastName</div><div class="line">        lastNameUser = user.getLastName();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="å®¹å™¨ç±»"><a href="#å®¹å™¨ç±»" class="headerlink" title="å®¹å™¨ç±»"></a>å®¹å™¨ç±»</h2><p>é€šç”¨çš„å®¹å™¨ç±»ï¼Œæ•°ç»„ï¼Œlistsï¼Œsparse lists å’Œ mapï¼Œå¯ä»¥ç”¨[]æ“ä½œç¬¦æ¥å­˜å–<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">&lt;data&gt;</div><div class="line">    &lt;import type=&quot;android.util.SparseArray&quot;/&gt;</div><div class="line">    &lt;import type=&quot;java.util.Map&quot;/&gt;</div><div class="line">    &lt;import type=&quot;java.util.List&quot;/&gt;</div><div class="line">    &lt;variable name=&quot;list&quot; type= &quot;List&amp;lt;String&amp;gt;&quot;/&gt;</div><div class="line">    &lt;variable name=&quot;sparse&quot; type=&quot;SparseArray&amp;lt;String&amp;gt;&quot;/&gt;</div><div class="line">    &lt;variable name=&quot;map&quot; type=&quot;Map&amp;lt;String,String&amp;gt;&quot;/&gt;</div><div class="line">    &lt;variable name=&quot;index type=&quot;int&quot;/&gt;</div><div class="line">    &lt;variable name=&quot;key&quot; type=&quot;String&quot;/&gt;</div><div class="line">&lt;/data&gt;</div><div class="line">...</div><div class="line">android:text=&quot;@&#123;list[index]&#125;&quot;</div><div class="line">...</div><div class="line">android:text=&quot;@&#123;sparse[index]&#125;&quot;</div><div class="line">...</div><div class="line">android:text=&quot;@&#123;map[key]&#125;&quot;</div></pre></td></tr></table></figure></p>
<h2 id="å­—ç¬¦ä¸²"><a href="#å­—ç¬¦ä¸²" class="headerlink" title="å­—ç¬¦ä¸²"></a>å­—ç¬¦ä¸²</h2><p>ä½¿ç”¨å•å¼•å·å°†å±æ€§å€¼æ‹¬èµ·æ¥ï¼Œå°±å¯ä»¥åœ¨è¡¨è¾¾å¼ä¸­ä½¿ç”¨åŒå¼•å·<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">android:text=&apos;@&#123;map[&quot;firstName&quot;]&#125;&apos;</div></pre></td></tr></table></figure></p>
<p>ä¹Ÿå¯ä»¥ç”¨åŒå¼•å·å°†å±æ€§å€¼æ‹¬èµ·æ¥ï¼Œç„¶åå­—ç¬¦ä¸²ä½¿ç”¨&amp;<code>quotï¼›</code>æˆ–è€…åå¼•å·`æ¥è°ƒç”¨<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">android:text=&quot;@&#123;map[&amp;quot;firstName&amp;quot;]&#125;&quot;</div><div class="line">android:text=&quot;@&#123;map[`firstName`]&#125;&quot;</div></pre></td></tr></table></figure></p>
<h2 id="èµ„æº"><a href="#èµ„æº" class="headerlink" title="èµ„æº"></a>èµ„æº</h2><p>æ™®é€šçš„è¯­æ³•åœ¨è¡¨è¾¾å¼ä¸­è®¿é—®èµ„æº <a href="http://blog.csdn.net/feelang/article/details/46342699" target="_blank" rel="external"><strong>å®˜æ–¹æ•™ç¨‹çš„å‘</strong></a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">android:padding=@&#123;large? (int)@dimen/largePadding: (int)@dimen/smallPadding&#125;</div><div class="line"></div><div class="line">android:background=&quot;@&#123;large? @color/red:@color/green&#125;&quot;</div><div class="line"></div><div class="line">android:text=&quot;@&#123;@string/nameFormat(firstName,lastName)&#125;&quot;</div><div class="line"></div><div class="line">android:text=&quot;@&#123;@plurals/banana(bananaCount,bananaCount)&#125;&quot;</div></pre></td></tr></table></figure></p>
<p>éœ€è¦æ˜¾ç¤ºå£°æ˜çš„èµ„æº<br><img src="http://static.zybuluo.com/LeoPoldCrossing/we3idy2ri20tt8de1i4rj3am/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-02-13%2018.14.05.png" alt="å±å¹•å¿«ç…§ 2017-02-13 18.14.05.png-32.8kB"></p>
<h1 id="æ•°æ®å¯¹è±¡-1"><a href="#æ•°æ®å¯¹è±¡-1" class="headerlink" title="æ•°æ®å¯¹è±¡"></a>æ•°æ®å¯¹è±¡</h1><p>DataBinding è®©æˆ‘å†³å®šå¼•å…¥åˆ°é¡¹ç›®ä¸­çš„åŸå› æ˜¯å®ƒå…·å¤‡<strong>æ•°æ®æ”¹å˜ï¼ŒUIéšä¹‹æ›´æ–°</strong>çš„èƒ½åŠ›ã€‚<br>Data Binding ä¸ºæˆ‘ä»¬æä¾›äº†ä¸‰ç§æ•°æ®å˜åŠ¨é€šçŸ¥æœºåˆ¶ï¼š<code>Observable Objectsï¼ŒObservable fieldsï¼ŒObservable collections</code>ã€‚</p>
<p>Come onï¼ Baby~ è®©æˆ‘ä»¬ä¸€èµ·çœ‹ä¸€ä¸‹è¿™ä¸‰ç§æœºåˆ¶çš„ç¥å¥‡ä¹‹å¤„ã€‚</p>
<h2 id="Observable-Objects"><a href="#Observable-Objects" class="headerlink" title="Observable Objects"></a>Observable Objects</h2><p>æˆ‘ä»¬åªéœ€è¦ä¿®æ”¹Modelç±»ï¼Œæ•°æ®æ”¹å˜åï¼Œæ›´æ–°UIçš„äº‹æƒ…ç”±Bindingå®Œæˆï¼Œå†ä¹Ÿä¸ç”¨è´¹æ—¶è´¹åŠ›çš„å»å†™<code>binding.setXXX</code>~so coolï¼<br><code>@Bindable</code>åœ¨ç¼–è¯‘æ—¶ä¼šåœ¨BRç±»å†…ç”Ÿæˆä¸€ä¸ªå…ƒç´ ã€‚BRç±»ä¼šåœ¨ç”Ÿæˆåœ¨ module packageä¸‹ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line">public class ObservableUser extends BaseObservable &#123;</div><div class="line">    private String name;</div><div class="line">    private long idNumber;</div><div class="line">    private int age;</div><div class="line"></div><div class="line"></div><div class="line">    @Bindable</div><div class="line">    public long getIdNumber() &#123;</div><div class="line">        return idNumber;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void setIdNumber(long idNumber) &#123;</div><div class="line">        this.idNumber = idNumber;</div><div class="line">        notifyPropertyChanged(BR.idNumber);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Bindable</div><div class="line">    public String getName() &#123;</div><div class="line">        return name;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void setName(String name) &#123;</div><div class="line">        this.name = name;</div><div class="line">        notifyPropertyChanged(BR.name);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public int getAge() &#123;</div><div class="line">        return age;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void setAge(int age) &#123;</div><div class="line">        this.age = age;</div><div class="line">        notifyChange();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="Observable-Fields"><a href="#Observable-Fields" class="headerlink" title="Observable Fields"></a>Observable Fields</h2><p>å¦‚æœæˆ‘ä»¬çš„Modelç±»é‡Œé¢åªæœ‰å°‘é‡çš„ Field æˆ–è€… æƒ³è¦èŠ‚çœæ—¶é—´ï¼Œå¯ä»¥ä½¿ç”¨<code>Observable Field</code>åŠå…¶æ´¾ç”Ÿçš„ <code>ObservableBoolean</code>,<code>ObservableByte</code>,<code>ObservableChar</code>,<code>ObservableShort</code>,<code>ObservableInt</code>,<code>ObservableLong</code>,<code>ObservableFloat</code>,<code>ObservableDouble</code>,<code>ObservableParcelable</code>ã€‚<br>ObaservableFieldè‡ªåŒ…å«obsevableå¯¹è±¡ï¼Œå¹¶ä¸”åªæœ‰ä¸€ä¸ªFieldã€‚</p>
<ul>
<li><p>Step 1 Model å®šä¹‰ ObservableField</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">public final ObservableField&lt;String&gt; name = new ObservableField&lt;String&gt;();</div><div class="line">public final ObservableLong NO = new ObservableLong();</div><div class="line">public final ObservableInt age = new ObservableInt();</div></pre></td></tr></table></figure>
</li>
<li><p>Step 2 Field Value çš„setå’Œget</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">observableFieldUser.name.set(&quot;James&quot;);</div><div class="line">observableFieldUser.NO.set(23);</div><div class="line">observableFieldUser.age.set(31);</div><div class="line"></div><div class="line">observableFieldUser.name.get();</div><div class="line">observableFieldUser.age.get();</div><div class="line">observableFieldUser.NO.get();</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="Observable-Collections"><a href="#Observable-Collections" class="headerlink" title="Observable Collections"></a>Observable Collections</h2><h3 id="ObservableMap"><a href="#ObservableMap" class="headerlink" title="ObservableMap"></a>ObservableMap</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"># åˆ›å»º</div><div class="line">private ObservableMap&lt;String, Object&gt; observableArrayMap = new ObservableArrayMap&lt;&gt;();</div><div class="line"></div><div class="line"># æ•°æ®</div><div class="line">observableArrayMap.put(&quot;system&quot;, &quot;Android&quot;);</div><div class="line">observableArrayMap.put(&quot;brand&quot;, &quot;ä¸‰æ˜Ÿ&quot;);</div><div class="line">observableArrayMap.put(&quot;version&quot;, &quot;6.0.1&quot;);</div><div class="line"></div><div class="line"># ä½¿ç”¨</div><div class="line">&lt;import type=&quot;android.databinding.ObservableMap&quot;/&gt;</div><div class="line"></div><div class="line">&lt;variable</div><div class="line">    name=&quot;map&quot;</div><div class="line">    type=&quot;ObservableMap&amp;lt;String,Object&amp;gt;&quot;/&gt;</div><div class="line"></div><div class="line">android:text=&apos;@&#123;@string/mapFormatString(map[&quot;system&quot;],map[`brand`],map[&quot;version&quot;])&#125;&apos;</div></pre></td></tr></table></figure>
<h3 id="ObservableList"><a href="#ObservableList" class="headerlink" title="ObservableList"></a>ObservableList</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"># åˆ›å»º</div><div class="line">private ObservableList&lt;Object&gt; observableArrayList = new ObservableArrayList();</div><div class="line"></div><div class="line"># æ•°æ®</div><div class="line">observableArrayList.add(0, &quot;Android&quot;);</div><div class="line"></div><div class="line"># ä½¿ç”¨</div><div class="line">&lt;import type=&quot;android.databinding.ObservableList&quot;/&gt;</div><div class="line"></div><div class="line">&lt;variable</div><div class="line">    name=&quot;list&quot;</div><div class="line">    type=&quot;ObservableList&amp;lt;Object&amp;gt;&quot; /&gt;</div><div class="line"></div><div class="line">android:text=&quot;@&#123;@string/listFormatString(list[0])&#125;&quot;</div></pre></td></tr></table></figure>
<h1 id="é«˜çº§-Binding"><a href="#é«˜çº§-Binding" class="headerlink" title="é«˜çº§ Binding"></a>é«˜çº§ Binding</h1><h2 id="Dynamic-Variables"><a href="#Dynamic-Variables" class="headerlink" title="Dynamic Variables"></a>Dynamic Variables</h2><p>ä»¥ RecyclerView ä¸ºä¾‹ï¼Œ Adapter çš„ Databinding éœ€è¦åŠ¨æ€ç”Ÿæˆï¼Œè¿™æ—¶æˆ‘ä»¬å°±éœ€è¦åŠ¨æ€åˆ›å»º Binding ã€‚</p>
<ul>
<li>åœ¨ OnCreateViewHolder ä¸­åˆ›å»º binding ï¼Œåœ¨ onBindViewHolder ä¸­è·å– bindingã€‚</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">@Override</div><div class="line">    public DynamicBindingViewHolder onCreateViewHolder(ViewGroup parent, int viewType) &#123;</div><div class="line">        ViewDataBinding viewDataBinding = DataBindingUtil.inflate(LayoutInflater.from(parent.getContext()), R.layout.dynamic_list_item, parent, false);</div><div class="line">        DynamicBindingViewHolder holder = new DynamicBindingViewHolder(viewDataBinding.getRoot());</div><div class="line">        holder.setBinding(viewDataBinding);</div><div class="line">        return holder;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public int getItemCount() &#123;</div><div class="line">        return users.size();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public void onBindViewHolder(DynamicBindingViewHolder holder, int position) &#123;</div><div class="line">        User user = users.get(position);</div><div class="line">        holder.getBinding().setVariable(BR.user, user);</div><div class="line">        holder.getBinding().executePendingBindings();</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<ul>
<li>æ„å»ºHolderæ—¶ç›´æ¥ç»‘å®šview<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">public DynamicBindingViewHolder onCreateViewHolder(ViewGroup parent, int viewType) &#123;</div><div class="line">    View inflate = LayoutInflater.from(parent.getContext()).inflate(R.layout.dynamic_list_item, parent,false);</div><div class="line">    return new DynamicBindingViewHolder(inflate);</div><div class="line">&#125;</div><div class="line"></div><div class="line">@Override</div><div class="line">public void onBindViewHolder(DynamicBindingViewHolder holder, int position) &#123;</div><div class="line">    User user = users.get(position);</div><div class="line">    holder.bind(user);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">public DynamicBindingViewHolder(View itemView) &#123;</div><div class="line">    super(itemView);</div><div class="line">    binding = DataBindingUtil.bind(itemView);</div><div class="line">&#125;</div><div class="line"></div><div class="line">public void bind(User user)&#123;</div><div class="line">    binding.setUser(user);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="Attribute-Setters"><a href="#Attribute-Setters" class="headerlink" title="Attribute Setters"></a>Attribute Setters</h2><p>å†™è¿‡è‡ªå®šä¹‰æ§ä»¶çš„ç«¥é‹éƒ½çŸ¥é“ï¼Œè‡ªå®šä¹‰å±æ€§éœ€è¦åœ¨<code>attrs</code> æ–‡ä»¶ä¸­å®šä¹‰ <code>declare-styleable</code>, åœ¨javaä»£ç è°ƒç”¨<code>set</code>æ–¹æ³•æ¥è¿›è¡Œèµ‹å€¼çš„ã€‚</p>
<p>åœ¨ Databindingä¸­ï¼Œä¸åœ¨ <code>attrs</code> æ–‡ä»¶ä¸­å®šä¹‰ <code>declare-styleable</code> ï¼Œä¹Ÿå¯ä»¥åœ¨xmlæ–‡ä»¶ä¸­è¿›è¡Œèµ‹å€¼ï¼Œåªéœ€è¦å¯¹åº”çš„setteræ–¹æ³•ã€‚</p>
<p>DataBinding æ¡†æ¶å†…ç½®äº†å‡ ç§è°ƒç”¨ set è¿›è¡Œèµ‹å€¼çš„æ–¹å¼ã€‚</p>
<h3 id="Automatic-Setters"><a href="#Automatic-Setters" class="headerlink" title="Automatic Setters"></a>Automatic Setters</h3><p>å±æ€§å’Œsetæ–¹æ³•å¯¹åº”<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;com.example.databindingsamples.view.NameCard</div><div class="line">    android:layout_width=&quot;match_parent&quot;</div><div class="line">    android:layout_height=&quot;wrap_content&quot;</div><div class="line">    app:object=&quot;@&#123;user&#125;&quot; /&gt;</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">public void setObject(User user)&#123;</div><div class="line">    firstName.setText(user.getFirstName());</div><div class="line">    lastName.setText(user.getLastName());</div><div class="line">    age.setText(user.getAge());</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Rename-Attribute-Setter"><a href="#Rename-Attribute-Setter" class="headerlink" title="Rename Attribute Setter"></a>Rename Attribute Setter</h3><p>ä¸€äº›å±æ€§çš„å‘½åä¸ setter ä¸å¯¹åº”ã€‚é’ˆå¯¹è¿™äº›å‡½æ•°ï¼Œå¯ä»¥ç”¨ BindingMethods æ³¨è§£æ¥å°†å±æ€§ä¸ setter ç»‘å®šåœ¨ä¸€èµ·ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œ<code>android:tint</code> å±æ€§å¯ä»¥è¿™æ ·ä¸ <code>setImageTintList(ColorStateList)</code>ç»‘å®šï¼Œè€Œä¸æ˜¯ setTint:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@BindingMethods</span>(&#123;</div><div class="line">      <span class="meta">@BindingMethod</span>(type = <span class="string">"android.widget.ImageView"</span>,</div><div class="line">                      attribute = <span class="string">"android:tint"</span>,</div><div class="line">                      method = <span class="string">"setImageTintList"</span>),</div><div class="line">&#125;)</div></pre></td></tr></table></figure></p>
<p>Android æ¡†æ¶ä¸­çš„ setter é‡å‘½åå·²ç»åœ¨åº“ä¸­å®ç°äº†ï¼Œæˆ‘ä»¬åªéœ€è¦å…³æ³¨è‡ªå·±çš„ setterã€‚</p>
<h3 id="Custom-Attribute-Setter"><a href="#Custom-Attribute-Setter" class="headerlink" title="Custom Attribute Setter"></a>Custom Attribute Setter</h3><p>ä¸€äº›å±æ€§éœ€è¦è‡ªå®šä¹‰ setter é€»è¾‘ã€‚æ¯”å¦‚ç›®å‰æ²¡æœ‰ä¸<code>android:paddingLeft</code> ç›¸å¯¹åº”çš„ setterï¼Œåªæœ‰ä¸€ä¸ª<code>setPadding(l,t,r,b)</code>å‡½æ•°ã€‚ç»“åˆé™æ€ binding adapter å‡½æ•°ä¸ BindingAdapter ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰å±æ€§ setterã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">@BindingAdater(&quot;android:paddingLeft&quot;)</div><div class="line">public static void setPaddingLeft(View view,int padding)&#123;</div><div class="line">    view.setPadding(padding,</div><div class="line">                    view.getPaddingTop(),</div><div class="line">                    view.getPaddingRight(),</div><div class="line">                    view.getPaddingBotton())</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>Binding adapter åœ¨å…¶ä»–è‡ªå®šä¹‰ç±»å‹ä¸Šä¹Ÿå¾ˆæ˜¯ very nice çš„ã€‚ For exampleï¼Œä¸€ä¸ª loader å¯ä»¥åœ¨éä¸»çº¿ç¨‹åŠ è½½å›¾ç‰‡ã€‚ å½“å­˜åœ¨å†²çªæ—¶ï¼Œå¼€å‘è€…åˆ›å»ºçš„ binding adapter ä¼šè¦†ç›– Data Binding çš„é»˜è®¤adapterã€‚<br>æˆ‘ä»¬è¿˜å¯ä»¥åˆ›å»ºå¤šä¸ª adapters å¹¶ä¸”ä¼ é€’å¤šä¸ªå‚æ•°ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">// ä¸éœ€è¦ä¸»åŠ¨è°ƒç”¨</div><div class="line">@BindingAdapter(&#123;&quot;imageUrl,&quot;error&quot;&#125;)&#123;</div><div class="line">public static void loadImage(ImageView view, String url, Drawable error)&#123;</div><div class="line">     Glide.with(context)</div><div class="line">                .load(url)</div><div class="line">                .error(error)</div><div class="line">                .into(imageView); </div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>layout æ–‡ä»¶çš„ ImageView æŒ‰ç…§ä¸‹é¢çš„å†™æ³•ï¼Œå°±ä¼šè°ƒç”¨ä¸Šé¢çš„adapterã€‚<br>imageUrl å’Œ error éƒ½ä½¿ç”¨ï¼Œå¹¶ä¸” imageUrl ä¸º Stringï¼Œerror ä¸º drawableã€‚<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">ImageView</span></span></div><div class="line">    <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">    <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">    <span class="attr">app:imageUrl</span>=<span class="string">"@&#123;url&#125;"</span></div><div class="line">    <span class="attr">app:error</span>=<span class="string">"@&#123;@drawable/ic_launcher&#125;"</span></div><div class="line">    /&gt;</div></pre></td></tr></table></figure></p>
<blockquote>
<p>Tipï¼š </p>
<ol>
<li>åœ¨åŒ¹é…adapteræ—¶ï¼Œè‡ªå®šä¹‰å‘½åç©ºé—´å°†è¢«å¿½ç•¥</li>
<li>æˆ‘ä»¬å¯ä»¥ä¸º android å‘½åç©ºé—´ç¼–å†™ adapter </li>
</ol>
</blockquote>
<p>äº‹ä»¶ handler ä»…å¯ä»¥ç”¨äºåªæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•çš„æ¥å£æˆ–è€…æŠ½è±¡ç±»,æ¯”å¦‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@BindingAdapter</span>(<span class="string">"android:onLayoutChange"</span>)</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">setOnLayoutChangeListener</span><span class="params">(View view, View.OnLayoutChangeListener oldValue,</span></span></div><div class="line">       View.OnLayoutChangeListener newValue) &#123;</div><div class="line">    <span class="keyword">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.HONEYCOMB) &#123;</div><div class="line">        <span class="keyword">if</span> (oldValue != <span class="keyword">null</span>) &#123;</div><div class="line">            view.removeOnLayoutChangeListener(oldValue);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (newValue != <span class="keyword">null</span>) &#123;</div><div class="line">            view.addOnLayoutChangeListener(newValue);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>å½“ä¸€ä¸ª listener æœ‰å¤šä¸ªæ–¹æ³•ï¼Œå®ƒå¿…é¡»åˆ†å‰²æˆå¤šä¸ª listener ã€‚ä¾‹å¦‚ï¼Œ View.OnAttachStateChangeListener å†…ç½®ä¸¤ä¸ªå‡½æ•°ï¼š <code>onViewAttachedToWindow()</code>ä¸ <code>onViewDetachedFromWindow()</code> ã€‚åœ¨è¿™é‡Œå¿…é¡»ä¸ºä¸¤ä¸ªä¸åŒçš„å±æ€§åˆ›å»ºä¸åŒçš„æ¥å£ã€‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@TargetApi</span>(VERSION_CODES.HONEYCOMB_MR1)</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">OnViewDetachedFromWindow</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">onViewDetachedFromWindow</span><span class="params">(View v)</span></span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="meta">@TargetApi</span>(VERSION_CODES.HONEYCOMB_MR1)</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">OnViewAttachedToWindow</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">onViewAttachedToWindow</span><span class="params">(View v)</span></span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>å› ä¸ºæ”¹å˜ä¸€ä¸ª listener ä¼šå½±å“åˆ°å¦å¤–ä¸€ä¸ªï¼Œæˆ‘ä»¬å¿…é¡»ç¼–å†™ä¸‰ä¸ªä¸åŒçš„ adapterï¼ŒåŒ…æ‹¬ä¿®æ”¹ä¸€ä¸ªå±æ€§çš„å’Œä¿®æ”¹ä¸¤ä¸ªå±æ€§çš„ã€‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@BindingAdapter</span>(<span class="string">"android:onViewAttachedToWindow"</span>)</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">setListener</span><span class="params">(View view, OnViewAttachedToWindow attached)</span> </span>&#123;</div><div class="line">    setListener(view, <span class="keyword">null</span>, attached);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="meta">@BindingAdapter</span>(<span class="string">"android:onViewDetachedFromWindow"</span>)</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">setListener</span><span class="params">(View view, OnViewDetachedFromWindow detached)</span> </span>&#123;</div><div class="line">    setListener(view, detached, <span class="keyword">null</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="meta">@BindingAdapter</span>(&#123;<span class="string">"android:onViewDetachedFromWindow"</span>, <span class="string">"android:onViewAttachedToWindow"</span>&#125;)</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">setListener</span><span class="params">(View view, <span class="keyword">final</span> OnViewDetachedFromWindow detach,</span></span></div><div class="line">        <span class="keyword">final</span> OnViewAttachedToWindow attach) &#123;</div><div class="line">    <span class="keyword">if</span> (VERSION.SDK_INT &gt;= VERSION_CODES.HONEYCOMB_MR1) &#123;</div><div class="line">        <span class="keyword">final</span> OnAttachStateChangeListener newListener;</div><div class="line">        <span class="keyword">if</span> (detach == <span class="keyword">null</span> &amp;&amp; attach == <span class="keyword">null</span>) &#123;</div><div class="line">            newListener = <span class="keyword">null</span>;</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            newListener = <span class="keyword">new</span> OnAttachStateChangeListener() &#123;</div><div class="line">                <span class="meta">@Override</span></div><div class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onViewAttachedToWindow</span><span class="params">(View v)</span> </span>&#123;</div><div class="line">                    <span class="keyword">if</span> (attach != <span class="keyword">null</span>) &#123;</div><div class="line">                        attach.onViewAttachedToWindow(v);</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line"></div><div class="line">                <span class="meta">@Override</span></div><div class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onViewDetachedFromWindow</span><span class="params">(View v)</span> </span>&#123;</div><div class="line">                    <span class="keyword">if</span> (detach != <span class="keyword">null</span>) &#123;</div><div class="line">                        detach.onViewDetachedFromWindow(v);</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">final</span> OnAttachStateChangeListener oldListener = ListenerUtil.trackListener(view,</div><div class="line">                newListener, R.id.onAttachStateChangeListener);</div><div class="line">        <span class="keyword">if</span> (oldListener != <span class="keyword">null</span>) &#123;</div><div class="line">            view.removeOnAttachStateChangeListener(oldListener);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (newListener != <span class="keyword">null</span>) &#123;</div><div class="line">            view.addOnAttachStateChangeListener(newListener);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>ä¸Šé¢çš„ä¾‹å­æ¯”æ™®é€šæƒ…å†µä¸‹å¤æ‚ï¼Œå› ä¸º View æ˜¯ <code>add/remove</code>ã€€<code>View.OnAttachStateChangeListener</code> è€Œä¸æ˜¯ <code>set</code>ã€‚ <code>android.databinding.adapters.ListenerUtil</code>å¯ä»¥ç”¨æ¥è¾…åŠ©è·Ÿè¸ªæ—§çš„ listener å¹¶ç§»é™¤å®ƒã€‚</p>
<p>å¯¹åº” <code>addOnAttachStateChangeListener(View.OnAttachStateChangeListener) )</code>æ”¯æŒçš„ api ç‰ˆæœ¬ï¼Œé€šè¿‡å‘ <code>OnViewDetachedFromWindow</code> å’Œ <code>OnViewAttachedToWindow</code> æ·»åŠ  <code>@TargetApi(VERSION_CODES.HONEYCHOMB_MR1)</code> æ³¨è§£ï¼Œ<br>Data Binding ä»£ç ç”Ÿæˆå™¨ä¼šçŸ¥é“è¿™äº› listener åªä¼šåœ¨ Honeycomb MR1 æˆ–æ›´æ–°çš„è®¾å¤‡ä¸Šä½¿ç”¨ã€‚</p>
<h2 id="Converters"><a href="#Converters" class="headerlink" title="Converters"></a>Converters</h2><h3 id="Object-Conversions"><a href="#Object-Conversions" class="headerlink" title="Object Conversions"></a>Object Conversions</h3><p>å½“ binding è¡¨è¾¾å¼è¿”å›å¯¹è±¡æ—¶ï¼Œä¼šé€‰æ‹©ä¸€ä¸ª setterï¼ˆè‡ªåŠ¨ Setterï¼Œé‡å‘½å Setterï¼Œè‡ªå®šä¹‰ Setterï¼‰ï¼Œå°†è¿”å›å¯¹è±¡å¼ºåˆ¶è½¬æ¢æˆ setter éœ€è¦çš„ç±»å‹ã€‚<br>ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨ ObservableMap ä¿å­˜æ•°æ®çš„ä¾‹å­ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">  <span class="attr">android:text</span>=<span class="string">'@&#123;userMap["lastName"]&#125;'</span></div><div class="line">  <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">  <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span>/&gt;</div></pre></td></tr></table></figure>
<p>åœ¨è¿™é‡Œï¼Œ userMap ä¼šè¿”å› Object ç±»å‹çš„å€¼ï¼Œè€Œè¿”å›å€¼ä¼šè¢«è‡ªåŠ¨è½¬æ¢æˆ setText(CharSequence) éœ€è¦çš„ç±»å‹ã€‚å½“å¯¹å‚æ•°ç±»å‹å­˜åœ¨ç–‘æƒ‘æ—¶ï¼Œå¼€å‘è€…éœ€è¦æ‰‹åŠ¨åšç±»å‹è½¬æ¢ã€‚</p>
<h3 id="Custom-Conversions"><a href="#Custom-Conversions" class="headerlink" title="Custom Conversions"></a>Custom Conversions</h3><p>æœ‰äº›æ—¶å€™æˆ‘ä»¬éœ€è¦è‡ªåŠ¨è½¬æ¢æˆç‰¹å®šçš„ç±»å‹ã€‚æ¯”å¦‚ï¼š<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">View</span></span></div><div class="line">   <span class="attr">android:background</span>=<span class="string">"@&#123;isError ? @color/red : @color/white&#125;"</span></div><div class="line">   <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">   <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span>/&gt;</div></pre></td></tr></table></figure></p>
<p>åœ¨è¿™é‡Œï¼ŒèƒŒæ™¯éœ€è¦çš„æ˜¯ Drawable ï¼Œä½†æ˜¯ color æ˜¯ä¸€ä¸ªæ•´æ•°ã€‚è¿™æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ BindingConversation æ¥å®ç°ç±»å‹çš„è½¬æ¢ã€‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@BindingConversion</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ColorDrawable <span class="title">convertColorToDrawable</span><span class="params">(<span class="keyword">int</span> color)</span> </span>&#123; </div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> ColorDrawable(color); </div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h1 id="Android-Studioå¯¹Data-Bindingçš„æ”¯æŒ"><a href="#Android-Studioå¯¹Data-Bindingçš„æ”¯æŒ" class="headerlink" title="Android Studioå¯¹Data Bindingçš„æ”¯æŒ"></a>Android Studioå¯¹Data Bindingçš„æ”¯æŒ</h1><ul>
<li><p>Android Studio æ”¯æŒ Data Binding è¡¨ç°ä¸ºï¼š</p>
<ul>
<li>è¯­æ³•é«˜äº®</li>
<li>æ ‡è®°è¡¨è¾¾å¼è¯­æ³•é”™è¯¯</li>
<li>XML ä»£ç è¡¥å…¨</li>
<li>è·³è½¬åˆ°å£°æ˜æˆ–å¿«é€Ÿæ–‡æ¡£ </li>
</ul>
</li>
</ul>
<blockquote>
<p>æ³¨æ„ï¼šæ•°ç»„å’Œæ³›å‹ç±»å‹ï¼Œå¦‚ Observable ç±»ï¼Œå½“æ²¡æœ‰é”™è¯¯æ—¶å¯èƒ½ä¼šæ˜¾ç¤ºé”™è¯¯ã€‚</p>
</blockquote>
<ul>
<li>åœ¨é¢„è§ˆçª—å£å¯æ˜¾ç¤º Data Binding è¡¨è¾¾å¼çš„é»˜è®¤å€¼ã€‚ä¾‹å¦‚ï¼š</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">    <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">    <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">    <span class="attr">android:text</span>=<span class="string">"@&#123;user.firstName, default=FirstName&#125;"</span>/&gt;</div><div class="line">  <span class="comment">&lt;!-- TextView çš„ text é»˜è®¤å€¼ä¸º FirstName --&gt;</span></div></pre></td></tr></table></figure>
<p>å¦‚æœä½ éœ€è¦åœ¨è®¾è®¡é˜¶æ®µæ˜¾ç¤ºé»˜è®¤å€¼ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>tools</code> å±æ€§ä»£æ›¿é»˜è®¤å€¼è¡¨è¾¾å¼ï¼Œè¯¦è§ <a href="http://tools.android.com/tips/layout-designtime-attributes" target="_blank" rel="external">è®¾è®¡é˜¶æ®µå¸ƒå±€å±æ€§ </a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;DataBindingä»‹ç»&quot;&gt;&lt;a href=&quot;#DataBindingä»‹ç»&quot; class=&quot;headerlink&quot; title=&quot;DataBindingä»‹ç»&quot;&gt;&lt;/a&gt;DataBindingä»‹ç»&lt;/h1&gt;&lt;p&gt;Data binding åœ¨2015å¹´7æœˆå‘å¸ƒçš„Android Studio v1.3.0 ç‰ˆæœ¬ä¸Šå¼•å…¥ï¼Œåœ¨2016å¹´4æœˆAndroid Studio v2.0.0 ä¸Šæ­£å¼æ”¯æŒã€‚ç›®å‰ä¸ºæ­¢ï¼ŒData Binding å·²ç»æ”¯æŒåŒå‘ç»‘å®šäº†ã€‚&lt;/p&gt;
&lt;p&gt;Databinding æ˜¯ä¸€ä¸ªå®ç°æ•°æ®å’ŒUIç»‘å®šçš„æ¡†æ¶ï¼Œæ˜¯ä¸€ä¸ªå®ç° MVVM æ¨¡å¼çš„å·¥å…·ï¼Œæœ‰äº† Data Bindingï¼Œåœ¨Androidä¸­ä¹Ÿå¯ä»¥å¾ˆæ–¹ä¾¿çš„å®ç°MVVMå¼€å‘æ¨¡å¼ã€‚&lt;/p&gt;
&lt;p&gt;Data Binding æ˜¯ä¸€ä¸ªsupportåº“ï¼Œæœ€ä½æ”¯æŒåˆ°Android 2.1ï¼ˆAPI Level 7+ï¼‰ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Android" scheme="http://yoursite.com/categories/Android/"/>
    
    
      <category term="databingding" scheme="http://yoursite.com/tags/databingding/"/>
    
  </entry>
  
  <entry>
    <title>Blogç¾åŒ–ã€å†™ä½œã€éƒ¨ç½²</title>
    <link href="http://yoursite.com/2017/02/09/Blog%E7%BE%8E%E5%8C%96%E3%80%81%E5%86%99%E4%BD%9C%E3%80%81%E9%83%A8%E7%BD%B2/"/>
    <id>http://yoursite.com/2017/02/09/Blogç¾åŒ–ã€å†™ä½œã€éƒ¨ç½²/</id>
    <published>2017-02-09T02:47:53.000Z</published>
    <updated>2017-02-20T15:39:03.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>å‰è¨€ï¼šBlogæ­å»ºå®Œæˆï¼Œæ—¢ç„¶æ˜¯ä¸“å±åšå®¢ï¼Œä¹Ÿå°±æ˜¯è‡ªå·±çš„ä¸€æ–¹ä¸–ç•Œï¼Œå¤§å®¶è‚¯å®šéƒ½æƒ³è®©Blogæœ‰è‡ªå·±çš„ä¸ªäººè‰²å½©ï¼Œè€Œä¸å¿…åƒè¯¸å¦‚CSDNä¸€æ ·å„ç§æ¡æ¡æ¡†æ¡†~</p>
</blockquote>
<hr>
<blockquote>
<p>å†…å®¹æ‘˜è¦</p>
<ol>
<li>åˆ©ç”¨Hexo Themeç¾åŒ–Blog    </li>
<li>Hexoå‘½ä»¤åŠŸèƒ½ä»‹ç»åŠä½¿ç”¨</li>
</ol>
</blockquote>
<hr>
<a id="more"></a>
<h1 id="Blogç¾åŒ–"><a href="#Blogç¾åŒ–" class="headerlink" title="Blogç¾åŒ–"></a>Blogç¾åŒ–</h1><p>åœ¨å¼€å§‹ç¾åŒ–ä¹‹å‰ï¼Œå…ˆæ¥äº†è§£ä¸€ä¸‹ä¸‹_config.ymlæ–‡ä»¶ï¼Œåœ¨Hexoä¸­æœ‰ä¸¤ä»½ä¸»è¦çš„é…ç½®æ–‡ä»¶ï¼Œåç§°éƒ½ä¸º_config.ymlã€‚</p>
<ul>
<li>ç«™ç‚¹æ ¹ç›®å½•ä¸‹çš„_config.yml<br>ä¸»è¦ç”¨äºHexoç«™ç‚¹çš„é…ç½®ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º<code>ç«™ç‚¹é…ç½®æ–‡ä»¶</code></li>
<li>ä¸»é¢˜ç›®å½•çš„_config.ymlï¼Œ<br>ä¸»è¦ç”¨äºä¸»é¢˜ç›¸å…³çš„é…ç½®ï¼Œç§°ä¹‹ä¸º<code>ä¸»é¢˜é…ç½®æ–‡ä»¶</code></li>
</ul>
<h2 id="å®‰è£…ä¸»é¢˜"><a href="#å®‰è£…ä¸»é¢˜" class="headerlink" title="å®‰è£…ä¸»é¢˜"></a>å®‰è£…ä¸»é¢˜</h2><h3 id="Hexo-Theme"><a href="#Hexo-Theme" class="headerlink" title="Hexo Theme"></a><a href="https://hexo.io/themes/" target="_blank" rel="external">Hexo Theme</a></h3><p><img src="http://static.zybuluo.com/LeoPoldCrossing/chy99uv8c2g1frc7he5efmc7/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-02-09%2012.54.24.png" alt="å±å¹•å¿«ç…§ 2017-02-09 12.54.24.png-639.2kB"></p>
<h3 id="é€‰æ‹©ä¸»é¢˜ï¼Œå®‰è£…"><a href="#é€‰æ‹©ä¸»é¢˜ï¼Œå®‰è£…" class="headerlink" title="é€‰æ‹©ä¸»é¢˜ï¼Œå®‰è£…"></a>é€‰æ‹©ä¸»é¢˜ï¼Œå®‰è£…</h3><p>Hexo å®‰è£…ä¸»é¢˜çš„æ–¹å¼éå¸¸ç®€å•ï¼Œåªéœ€è¦å°†ä¸»é¢˜æ–‡ä»¶copyè‡³ç«™ç‚¹æ²¡æœ‰ç†ç”±çš„ themes ç›®å½•ä¸‹ï¼Œä»¥Nextä¸»é¢˜ä¸¾ä¾‹ï¼š</p>
<ul>
<li><p>Step 1 ç‚¹å‡»è¿›å…¥ä¸»é¢˜ä½œè€…çš„åšå®¢ï¼Œç‚¹å‡»Github<br><img src="http://static.zybuluo.com/LeoPoldCrossing/fdj97m3v6l0zn5v07imub0sz/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-02-09%2014.03.29.png" alt="å±å¹•å¿«ç…§ 2017-02-09 14.03.29.png-287kB"></p>
</li>
<li><p>Step 2 è·å–ä¸»é¢˜åœ°å€ ï¼Œä½¿ç”¨Git checkout ä»£ç </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ cd &lt;your hexo folder&gt;</div><div class="line"># https://github.com/iissnan/hexo-theme-next ä¸ºä¸»é¢˜ä»£ç åœ°å€</div><div class="line"># themes/nextä¸ºä¸»é¢˜ä¿å­˜è·¯å¾„ï¼Œnextä¸ºä¸»é¢˜åï¼Œå¯ä»¥ä¿®æ”¹</div><div class="line">$ git clone https://github.com/iissnan/hexo-theme-next themes/next</div></pre></td></tr></table></figure>
</li>
<li><p>Step 3 å¯ç”¨ä¸»é¢˜<br>ä¿®æ”¹<code>ç«™ç‚¹é…ç½®æ–‡ä»¶</code>,æ‰¾åˆ°themeå­—æ®µï¼Œå°†å…¶å€¼ä¿®æ”¹ä¸ºnext(ä¸»é¢˜å)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">theme: next</div></pre></td></tr></table></figure>
</li>
</ul>
<p>OK~ä¸»é¢˜å®‰è£…å®Œæˆï¼Œè®©æˆ‘æ¥éªŒè¯ä¸€ä¸‹ï¼Œä¸»é¢˜æ˜¯å¦å®‰è£…æˆåŠŸ</p>
<ul>
<li>Step 4 éªŒè¯ä¸»é¢˜æ•ˆæœ<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># ç»ˆç«¯è¾“å…¥å‘½ä»¤</div><div class="line">$ hexo generate</div><div class="line">$ hexo server</div><div class="line">INFO  Hexo is running at http://0.0.0.0:4000/. Press Ctrl+C to stop.</div></pre></td></tr></table></figure>
</li>
</ul>
<p>ä½¿ç”¨æµè§ˆå™¨è®¿é—®<a href="http://localhost:4000ï¼ŒæŸ¥çœ‹ç«™ç‚¹æ˜¯å¦æ­£ç¡®è¿è¡Œã€‚" target="_blank" rel="external">http://localhost:4000ï¼ŒæŸ¥çœ‹ç«™ç‚¹æ˜¯å¦æ­£ç¡®è¿è¡Œã€‚</a></p>
<h2 id="ä¸»é¢˜é…ç½®"><a href="#ä¸»é¢˜é…ç½®" class="headerlink" title="ä¸»é¢˜é…ç½®"></a>ä¸»é¢˜é…ç½®</h2><h3 id="é€‰æ‹©Scheme"><a href="#é€‰æ‹©Scheme" class="headerlink" title="é€‰æ‹©Scheme"></a>é€‰æ‹©Scheme</h3><p>Schemeæ˜¯Nextæä¾›çš„ä¸€ç§ç‰¹æ€§ï¼Œä¸ºNextæä¾›äº†å¤šç§ä¸åŒçš„å¤–è§‚ã€‚</p>
<ul>
<li>Muse - é»˜è®¤ Schemeï¼Œè¿™æ˜¯ NexT æœ€åˆçš„ç‰ˆæœ¬ï¼Œé»‘ç™½ä¸»è°ƒï¼Œå¤§é‡ç•™ç™½</li>
<li>Mist - Muse çš„ç´§å‡‘ç‰ˆæœ¬ï¼Œæ•´æ´æœ‰åºçš„å•æ å¤–è§‚</li>
<li>Pisces - åŒæ  Schemeï¼Œå°å®¶ç¢§ç‰ä¼¼çš„æ¸…æ–°</li>
</ul>
<p>Schemeçš„åˆ‡æ¢é€šè¿‡<code>ä¸»é¢˜é…ç½®æ–‡ä»¶</code>çš„schemeå­—æ®µã€‚æ•ˆæœå›¾ï¼Œå°±ä¸ä¸Šäº†å“ˆ~<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># Schemes</div><div class="line">scheme: Muse</div><div class="line">#scheme: Mist</div><div class="line">#scheme: Pisces</div></pre></td></tr></table></figure></p>
<h3 id="è®¾ç½®è¯­è¨€"><a href="#è®¾ç½®è¯­è¨€" class="headerlink" title="è®¾ç½®è¯­è¨€"></a>è®¾ç½®è¯­è¨€</h3><p>ç¼–è¾‘<code>ç«™ç‚¹é…ç½®æ–‡ä»¶</code>ï¼Œå°†languageè®¾ç½®ä¸ºæ‰€éœ€è¦çš„è¯­è¨€ã€‚ä¾‹å¦‚ç®€ä½“ä¸­æ–‡ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">language: zh-Hans</div></pre></td></tr></table></figure></p>
<p>Nextè¯­è¨€å¯¹ç…§è¡¨<br><img src="http://static.zybuluo.com/LeoPoldCrossing/r1qp2pht6wrhw0hevowoornk/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-02-09%2014.43.50.png" alt="å±å¹•å¿«ç…§ 2017-02-09 14.43.50.png-51.1kB"></p>
<h3 id="è®¾ç½®èœå•"><a href="#è®¾ç½®èœå•" class="headerlink" title="è®¾ç½®èœå•"></a>è®¾ç½®èœå•</h3><p>èœå•è®¾ç½®åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†</p>
<ul>
<li><p>åç§°å’Œé“¾æ¥ï¼šåœ¨<code>ä¸»é¢˜é…ç½®æ–‡ä»¶</code>ä¸­é…ç½®</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">#é…ç½®ç¤ºä¾‹</div><div class="line">menu:</div><div class="line">  home: /</div><div class="line">  categories: /categories</div><div class="line">  #about: /about</div><div class="line">  archives: /archives</div><div class="line">  tags: /tags</div><div class="line">  #search: /search</div><div class="line">  #sitemap: /sitemap.xml</div><div class="line">  #commonweal: /404.html</div></pre></td></tr></table></figure>
</li>
<li><p>èœå•æ˜¾ç¤ºæ–‡æœ¬ï¼š Hexoåœ¨ç”Ÿæˆæ—¶ï¼Œä½¿ç”¨ä¸Šé¢é…ç½®çš„åç§°æŸ¥æ‰¾å¯¹åº”è¯­è¨€çš„ç¿»è¯‘ã€‚è¿™äº›ç¿»è¯‘æ–‡æœ¬æ”¾ç½®åœ¨<code>themes/${ä¸»é¢˜å}/languages/{language}.yml</code> ({language}ä¸ºä½¿ç”¨çš„è¯­è¨€)ï¼Œå¦‚ä¸­æ–‡ å¯¹åº”çš„å°±æ˜¯ zh-Hans.yml </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">menu:</div><div class="line">  home: é¦–é¡µ</div><div class="line">  archives: å½’æ¡£</div><div class="line">  categories: åˆ†ç±»</div><div class="line">  schedule: æ—¥ç¨‹</div><div class="line">  tags: æ ‡ç­¾</div><div class="line">  about: å…³äº</div><div class="line">  search: æœç´¢</div><div class="line">  commonweal: å…¬ç›Š404</div></pre></td></tr></table></figure>
</li>
<li><p>èœå•å›¾æ ‡ï¼šå¯¹åº”å­—æ®µä¸º menu_icons.<code>ä¸»é¢˜é…ç½®æ–‡ä»¶</code>ï¼Œæ³¨æ„é”®å€¼å¾—å¤§å°å†™éœ€è¦ä¸¥æ ¼åŒ¹é…</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">menu_icons:</div><div class="line">  # æ§åˆ¶å›¾æ ‡æ˜¯å¦æ˜¾ç¤ºï¼Œfalseä¸ºä¸æ˜¾ç¤º</div><div class="line">  enable: true</div><div class="line">  #KeyMapsToMenuItemKey: NameOfTheIconFromFontAwesome</div><div class="line">  home: home</div><div class="line">  about: user</div><div class="line">  categories: th</div><div class="line">  schedule: calendar</div><div class="line">  tags: tags</div><div class="line">  archives: archive</div><div class="line">  sitemap: sitemap</div><div class="line">  commonweal: heartbeat</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="è®¾ç½®ä¾§è¾¹æ "><a href="#è®¾ç½®ä¾§è¾¹æ " class="headerlink" title="è®¾ç½®ä¾§è¾¹æ "></a>è®¾ç½®ä¾§è¾¹æ </h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œä¾§æ ä»…åœ¨æ–‡ç« é¡µé¢ï¼ˆæœ‰ç›®å½•åˆ—è¡¨æ—¶ï¼‰æ˜¾ç¤ºï¼Œå¹¶æ”¾ç½®äºå³ä¾§ä½ç½®ã€‚å¯ä»¥é€šè¿‡ä¿®æ”¹<code>ä¸»é¢˜é…ç½®æ–‡ä»¶</code>ä¸­çš„sidebarå­—æ®µæ¥æ§åˆ¶ä¾§æ çš„è¡Œä¸ºã€‚</p>
<h4 id="è®¾ç½®ä¾§æ ä½ç½®-ï¼Œä¿®æ”¹sidebar-positionçš„å€¼"><a href="#è®¾ç½®ä¾§æ ä½ç½®-ï¼Œä¿®æ”¹sidebar-positionçš„å€¼" class="headerlink" title="è®¾ç½®ä¾§æ ä½ç½® ï¼Œä¿®æ”¹sidebar.positionçš„å€¼"></a>è®¾ç½®ä¾§æ ä½ç½® ï¼Œä¿®æ”¹sidebar.positionçš„å€¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sidebar:</div><div class="line">    position: left or right</div></pre></td></tr></table></figure>
<blockquote>
<p>Tips: ç›®å‰ä»…Pisces Schemeæ”¯æŒpositioné…ç½®ï¼Œå½±å“5.0.0åŠæ›´ä½ç‰ˆæœ¬ </p>
</blockquote>
<h4 id="è®¾ç½®ä¾§æ æ˜¾ç¤ºæ—¶æœºï¼Œä¿®æ”¹sidebar-diplayçš„å€¼"><a href="#è®¾ç½®ä¾§æ æ˜¾ç¤ºæ—¶æœºï¼Œä¿®æ”¹sidebar-diplayçš„å€¼" class="headerlink" title="è®¾ç½®ä¾§æ æ˜¾ç¤ºæ—¶æœºï¼Œä¿®æ”¹sidebar.diplayçš„å€¼"></a>è®¾ç½®ä¾§æ æ˜¾ç¤ºæ—¶æœºï¼Œä¿®æ”¹sidebar.diplayçš„å€¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sidebar:</div><div class="line">    display: post(é»˜è®¤å€¼)</div></pre></td></tr></table></figure>
<ul>
<li>post : é»˜è®¤è¡Œä¸ºï¼Œåœ¨æ–‡ç« é¡µé¢ï¼ˆæœ‰ç›®å½•åˆ—è¡¨ï¼‰æ—¶æ˜¾ç¤ºã€‚</li>
<li>always: åœ¨æ‰€æœ‰é¡µé¢æ˜¾ç¤º</li>
<li>hide: åœ¨æ‰€æœ‰é¡µé¢éƒ½éšè—ï¼ˆå¯ä»¥æ‰‹åŠ¨å±•å¼€ï¼‰</li>
<li>remove: å®Œå…¨ç§»é™¤</li>
</ul>
<h2 id="å…¶ä»–è®¾ç½®"><a href="#å…¶ä»–è®¾ç½®" class="headerlink" title="å…¶ä»–è®¾ç½®"></a>å…¶ä»–è®¾ç½®</h2><h3 id="å¤´åƒé…ç½®"><a href="#å¤´åƒé…ç½®" class="headerlink" title="å¤´åƒé…ç½®"></a>å¤´åƒé…ç½®</h3><p>ç¼–è¾‘<code>ç«™ç‚¹é…ç½®æ–‡ä»¶</code>ï¼Œæ–°å¢ avatar å­—æ®µï¼Œå€¼ä¸ºå¤´åƒçš„é“¾æ¥åœ°å€ã€‚<br><img src="http://static.zybuluo.com/LeoPoldCrossing/ztmwwfedxp5mlnl6baurqb7k/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-02-09%2018.11.06.png" alt="å±å¹•å¿«ç…§ 2017-02-09 18.11.06.png-40.8kB"><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># ç¤ºä¾‹ï¼š</div><div class="line">avatar: /images/avatar.png</div></pre></td></tr></table></figure></p>
<h3 id="ä½œè€…æ˜µç§°é…ç½®"><a href="#ä½œè€…æ˜µç§°é…ç½®" class="headerlink" title="ä½œè€…æ˜µç§°é…ç½®"></a>ä½œè€…æ˜µç§°é…ç½®</h3><p>ç¼–è¾‘<code>ç«™ç‚¹é…ç½®æ–‡ä»¶</code> author å­—æ®µ</p>
<h3 id="ç«™ç‚¹æè¿°"><a href="#ç«™ç‚¹æè¿°" class="headerlink" title="ç«™ç‚¹æè¿°"></a>ç«™ç‚¹æè¿°</h3><p>ç¼–è¾‘<code>ç«™ç‚¹é…ç½®æ–‡ä»¶</code> description å­—æ®µ</p>
<hr>
<h1 id="Hexo-å¸¸ç”¨å‘½ä»¤"><a href="#Hexo-å¸¸ç”¨å‘½ä»¤" class="headerlink" title="Hexo å¸¸ç”¨å‘½ä»¤"></a>Hexo å¸¸ç”¨å‘½ä»¤</h1><p>æ ¹æ®ä¸Šé¢çš„æ•™ç¨‹ï¼Œé¡µé¢åšæˆè‡ªå·±å–œæ¬¢çš„æ ·å­ï¼Œä¹å‘µå‘µçš„åˆ°å¤„ç‚¹~ ç‚¹åˆ°åˆ†ç±»å’Œæ ‡ç­¾çš„æ—¶å€™ï¼Œä¸€è„¸å¤§å†™çš„æ‡µé€¼ã€‚ã€‚ã€‚é¡µé¢ä¸€ç‰‡ç©ºç™½ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">åˆ†ç±»é¡µé“¾æ¥</div><div class="line">https://leopoldcrossing.github.io/categories/</div><div class="line">æ ‡ç­¾é¡µé“¾æ¥</div><div class="line">https://leopoldcrossing.github.io/tags/</div><div class="line"></div><div class="line">è¿›å…¥ source ç›®å½•ï¼Œå‘ç°ä¹ˆæœ‰categorieså’Œtagsæ–‡ä»¶å¤¹ã€‚</div></pre></td></tr></table></figure></p>
<p>é—®é¢˜åˆ†æå‡ºæ¥ï¼Œå½“ç„¶è¦è§£å†³äº†ï¼ï¼ï¼ æ˜¯æ—¶å€™è®© Hexo ä¸€å±•èº«æ‰‹äº†ã€‚åœ¨è¿™é‡Œåªåˆ—å‡ºä¸€äº›å¸¸ç”¨å‘½ä»¤ã€‚æŸ¥çœ‹æ‰€æœ‰å‘½ä»¤è¯·ç§»æ­¥<a href="https://hexo.io/zh-cn/docs/commands.html" target="_blank" rel="external">Hexoå‘½ä»¤</a></p>
<h2 id="new-å‘½ä»¤"><a href="#new-å‘½ä»¤" class="headerlink" title="new å‘½ä»¤"></a>new å‘½ä»¤</h2><h3 id="æ ¼å¼"><a href="#æ ¼å¼" class="headerlink" title="æ ¼å¼"></a>æ ¼å¼</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new [layout] &lt;title&gt;</div></pre></td></tr></table></figure>
<p>æ–°å»ºå‘½ä»¤ï¼Œå¦‚æœä¹ˆæœ‰è®¾ç½®<code>layout</code>ï¼Œåˆ™ä½¿ç”¨ _config.yml æ–‡ä»¶ä¸­çš„ default_layout çš„å€¼ï¼Œ å¦‚æœ title åŒ…å«ç©ºæ ¼ï¼Œè¯·ä½¿ç”¨å¼•å·æ‹¬èµ·æ¥ã€‚</p>
<h3 id="layout-å–å€¼"><a href="#layout-å–å€¼" class="headerlink" title="layout å–å€¼"></a>layout å–å€¼</h3><ul>
<li><p>postï¼š å­˜å‚¨è‡³ source/_post ç›®å½•ï¼Œå‘å¸ƒåˆ°Blogçš„æ–‡ç« </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new post &quot;filename&quot;</div></pre></td></tr></table></figure>
</li>
<li><p>pageï¼š å­˜å‚¨å€¼ source ç›®å½•ï¼Œæ–°å»ºé¡µé¢ï¼Œæ¯”å¦‚æ ‡ç­¾ï¼Œåˆ†ç±»ç­‰ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># æ–°å»ºæ ‡ç­¾é¡µé¢</div><div class="line">$ hexo new page tags</div><div class="line"># æ–°å»ºåˆ†ç±»é¡µé¢</div><div class="line">$ hexo new page categories</div></pre></td></tr></table></figure>
</li>
<li><p>draftï¼š å­˜å‚¨è‡³ source/_draft ç›®å½•ï¼Œæ–°å»ºè‰ç¨¿</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new draft &quot;filename&quot;</div></pre></td></tr></table></figure>
</li>
</ul>
<p>è‰ç¨¿é»˜è®¤ä¸ä¼šæ˜¾ç¤ºåœ¨é¡µé¢ä¸­ï¼Œå¯ä»¥é€šè¿‡æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤æ˜¾ç¤ºè‰ç¨¿<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo --draft</div></pre></td></tr></table></figure></p>
<p>æˆ–è€…ä¿®æ”¹<code>ç«™ç‚¹é…ç½®æ–‡ä»¶</code> çš„ <code>render_drafts</code> å‚æ•°å€¼ä¸ºtrueã€‚</p>
<h2 id="generate-å‘½ä»¤"><a href="#generate-å‘½ä»¤" class="headerlink" title="generate å‘½ä»¤"></a>generate å‘½ä»¤</h2><h3 id="åŠŸèƒ½"><a href="#åŠŸèƒ½" class="headerlink" title="åŠŸèƒ½"></a>åŠŸèƒ½</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># ç”Ÿæˆé™æ€æ–‡ä»¶ï¼Œå³blogç›®å½•ä¸‹çš„publicç›®å½•</div><div class="line">$ hexo generate</div><div class="line">or </div><div class="line">$ hexo g</div></pre></td></tr></table></figure>
<h3 id="å¯é€‰å‚æ•°"><a href="#å¯é€‰å‚æ•°" class="headerlink" title="å¯é€‰å‚æ•°"></a>å¯é€‰å‚æ•°</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># æ–‡ä»¶ç”Ÿæˆåç«‹åˆ»éƒ¨ç½²è‡³ç½‘ç«™</div><div class="line">$ hexo generate -d or -deploy</div><div class="line"># ç›‘è§†æ–‡ä»¶å˜åŠ¨</div><div class="line">$ hexo generate -w or -watch</div></pre></td></tr></table></figure>
<h2 id="publish-å‘½ä»¤"><a href="#publish-å‘½ä»¤" class="headerlink" title="publish å‘½ä»¤"></a>publish å‘½ä»¤</h2><h3 id="åŠŸèƒ½-1"><a href="#åŠŸèƒ½-1" class="headerlink" title="åŠŸèƒ½"></a>åŠŸèƒ½</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># å‘å¸ƒè‰ç¨¿ï¼Œå³å°†_draftç›®å½•ä¸‹çš„æ–‡ä»¶ç§»åŠ¨åˆ°_postsç›®å½•</div><div class="line">$ hexo publish [layout] &lt;filename&gt;</div></pre></td></tr></table></figure>
<h2 id="server-å‘½ä»¤"><a href="#server-å‘½ä»¤" class="headerlink" title="server å‘½ä»¤"></a>server å‘½ä»¤</h2><h3 id="åŠŸèƒ½-2"><a href="#åŠŸèƒ½-2" class="headerlink" title="åŠŸèƒ½"></a>åŠŸèƒ½</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># å¯åŠ¨æœåŠ¡å™¨ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œè®¿é—®ç½‘å€ä¸ºï¼š http://localhost:4000/ã€‚</div><div class="line">$ hexo server</div><div class="line">or </div><div class="line">$ hexo s</div></pre></td></tr></table></figure>
<h3 id="å¯é€‰å‚æ•°-1"><a href="#å¯é€‰å‚æ•°-1" class="headerlink" title="å¯é€‰å‚æ•°"></a>å¯é€‰å‚æ•°</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"># é‡è®¾ç«¯å£</div><div class="line">$ hexo server -p or --port</div><div class="line"># åªä½¿ç”¨é™æ€æ–‡ä»¶</div><div class="line">$ hexo server -s or --static</div><div class="line"># å¯åŠ¨æ—¥å¿—è®°å½•ï¼Œä½¿ç”¨è¦†ç›–è®°å½•æ ¼å¼</div><div class="line">$ hexo server -l or --log</div></pre></td></tr></table></figure>
<h2 id="deployå‘½ä»¤"><a href="#deployå‘½ä»¤" class="headerlink" title="deployå‘½ä»¤"></a>deployå‘½ä»¤</h2><h3 id="åŠŸèƒ½-3"><a href="#åŠŸèƒ½-3" class="headerlink" title="åŠŸèƒ½"></a>åŠŸèƒ½</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># éƒ¨ç½²generateå‘½ä»¤ç”Ÿæˆçš„é™æ€æ–‡ä»¶è‡³blog</div><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>
<p>###ã€€å¯é€‰å‚æ•°<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ï¼ƒéƒ¨ç½²ä¹‹å‰ç”Ÿæˆé™æ€æ–‡ä»¶</div><div class="line">ï¼„ hexo deploy -g or --generate</div></pre></td></tr></table></figure></p>
<h2 id="clean-å‘½ä»¤"><a href="#clean-å‘½ä»¤" class="headerlink" title="clean å‘½ä»¤"></a>clean å‘½ä»¤</h2><h3 id="åŠŸèƒ½-4"><a href="#åŠŸèƒ½-4" class="headerlink" title="åŠŸèƒ½"></a>åŠŸèƒ½</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># æ¸…é™¤ç¼“å­˜æ–‡ä»¶(db.json)å’Œå·²ç”Ÿæˆçš„é™æ€æ–‡ä»¶(public)</div><div class="line">$ hexo clean</div></pre></td></tr></table></figure>
<p>åœ¨æŸäº›æƒ…å†µï¼ˆå°¤å…¶æ˜¯æ›´æ¢ä¸»é¢˜åï¼‰ï¼Œå¦‚æœå‘ç°æ‚¨å¯¹ç«™ç‚¹çš„æ›´æ”¹æ— è®ºå¦‚ä½•ä¹Ÿä¸ç”Ÿæ•ˆï¼Œæ‚¨å¯èƒ½éœ€è¦è¿è¡Œè¯¥å‘½ä»¤</p>
<hr>
<h1 id="å½©è›‹"><a href="#å½©è›‹" class="headerlink" title="å½©è›‹"></a>å½©è›‹</h1><h2 id="æ ‡ç­¾å’Œåˆ†ç±»çš„æ­£ç¡®æ‰“å¼€å§¿åŠ¿"><a href="#æ ‡ç­¾å’Œåˆ†ç±»çš„æ­£ç¡®æ‰“å¼€å§¿åŠ¿" class="headerlink" title="æ ‡ç­¾å’Œåˆ†ç±»çš„æ­£ç¡®æ‰“å¼€å§¿åŠ¿"></a>æ ‡ç­¾å’Œåˆ†ç±»çš„æ­£ç¡®æ‰“å¼€å§¿åŠ¿</h2><ul>
<li><p>ä¿®æ”¹tagså’Œcategoriesç›®å½•ä¸‹çš„index.mdæ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">---</div><div class="line">title: æ ‡ç­¾</div><div class="line">date: 2017-02-09 22:53:01</div><div class="line">type: &quot;tags&quot;</div><div class="line">---</div><div class="line"></div><div class="line">---</div><div class="line">title: åˆ†ç±»</div><div class="line">date: 2017-02-09 22:53:11</div><div class="line">type: &quot;categories&quot;</div><div class="line">---</div></pre></td></tr></table></figure>
</li>
<li><p>MarkDown ç¼–è¾‘æ–‡ç« æ·»åŠ æ ‡ç­¾å’Œåˆ†ç±»</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">---</div><div class="line">title: Hexo + GitHub Pages æ­å»ºä¸“å±åšå®¢</div><div class="line">date: 2017-02-08</div><div class="line">tag:</div><div class="line">    - Hexo</div><div class="line">categories:</div><div class="line">    - æ•™ç¨‹</div><div class="line">---</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™:"></a>å‚è€ƒèµ„æ–™:</h2><ul>
<li><a href="https://hexo.io/zh-cn/" target="_blank" rel="external">Hexoå®˜ç½‘</a></li>
<li><a href="http://theme-next.iissnan.com/" target="_blank" rel="external">Nextä¸»é¢˜ä½¿ç”¨æ–‡æ¡£</a></li>
</ul>
<hr>
<h1 id="å†™åœ¨æœ€å"><a href="#å†™åœ¨æœ€å" class="headerlink" title="å†™åœ¨æœ€å"></a>å†™åœ¨æœ€å</h1><blockquote>
<p>ç”¨äº†ä¸¤å¤©çš„æ—¶é—´æ¥æ­å»ºBlogå’Œæ•´ç†æ•™ç¨‹ï¼Œåœ¨æ·»åŠ å¤šè¯´è¯„è®ºç³»ç»Ÿæ—¶ï¼Œå› ä¸ºå¤šè¯´æœåŠ¡å™¨çš„å¼‚å¸¸ï¼Œæœ¬çŒ¿è¿˜æ²¡æˆåŠŸæ·»åŠ ã€‚ã€‚ã€‚åæœŸä¼šè¡¥ä¸Šã€‚Blogæ­å»ºï¼Œç¾åŒ–ï¼Œéƒ¨ç½²å¯ä»¥æš‚å‘Šä¸€æ®µè½ï¼Œåé¢æˆ‘ä¼šå°½å¿«çš„æ•´ç†MarkDownçš„è¯­æ³•åŠGitçš„ä½¿ç”¨ã€‚ã€‚ã€‚ç»™Blogçš„æ­å»ºç”»ä¸Šä¸€ä¸ªåœ†æ»¡çš„å¥å·~ </p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;å‰è¨€ï¼šBlogæ­å»ºå®Œæˆï¼Œæ—¢ç„¶æ˜¯ä¸“å±åšå®¢ï¼Œä¹Ÿå°±æ˜¯è‡ªå·±çš„ä¸€æ–¹ä¸–ç•Œï¼Œå¤§å®¶è‚¯å®šéƒ½æƒ³è®©Blogæœ‰è‡ªå·±çš„ä¸ªäººè‰²å½©ï¼Œè€Œä¸å¿…åƒè¯¸å¦‚CSDNä¸€æ ·å„ç§æ¡æ¡æ¡†æ¡†~&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;blockquote&gt;
&lt;p&gt;å†…å®¹æ‘˜è¦&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;åˆ©ç”¨Hexo Themeç¾åŒ–Blog    &lt;/li&gt;
&lt;li&gt;Hexoå‘½ä»¤åŠŸèƒ½ä»‹ç»åŠä½¿ç”¨&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
    
    </summary>
    
      <category term="æ•™ç¨‹" scheme="http://yoursite.com/categories/%E6%95%99%E7%A8%8B/"/>
    
    
      <category term="Hexo" scheme="http://yoursite.com/tags/Hexo/"/>
    
      <category term="Blog" scheme="http://yoursite.com/tags/Blog/"/>
    
  </entry>
  
  <entry>
    <title>Hexo + GitHub Pages æ­å»ºä¸“å±åšå®¢</title>
    <link href="http://yoursite.com/2017/02/08/Hexo-Github-Pages-%E6%90%AD%E5%BB%BA%E4%B8%93%E5%B1%9E%E5%8D%9A%E5%AE%A2/"/>
    <id>http://yoursite.com/2017/02/08/Hexo-Github-Pages-æ­å»ºä¸“å±åšå®¢/</id>
    <published>2017-02-07T16:00:00.000Z</published>
    <updated>2017-02-09T14:56:32.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>å‰è¨€ï¼š2017å¹´ä¼Šå§‹ï¼Œå…ˆç»™è‡ªå·±å®šäº†ä¸€ä¸ªå°ç›®æ ‡ï¼Œå°†Blogè¿ç§»åˆ°Hexoã€‚æœ¬æ–‡æ˜¯æˆ‘2017å¹´çš„å¼€å§‹ï¼Œä¹Ÿæ˜¯æˆ‘åœ¨Hexoçš„å¼€ç«¯ï¼ŒMarkä¸€ä¸‹ï¼</p>
</blockquote>
<hr>
<a id="more"></a>
<blockquote>
<p>æ‘˜è¦ï¼šæœ¬æ–‡çš„æ ¸å¿ƒæ˜¯ä»‹ç»å¦‚ä½•åˆ©ç”¨Github Pages å’Œ Hexoæ­å»ºè‡ªå·±çš„Blogï¼Œè‡³äºGitçš„ä½¿ç”¨ï¼Œé¡µé¢çš„ç¾åŒ–ï¼ŒHexoçš„å‘½ä»¤ç­‰ï¼Œæ•¬è¯·æœŸå¾…ã€‚ã€‚ã€‚åˆ«æ‰”é¸¡è›‹</p>
</blockquote>
<hr>
<h1 id="Hexo-GitHub-GithubPages-ä»‹ç»"><a href="#Hexo-GitHub-GithubPages-ä»‹ç»" class="headerlink" title="Hexo GitHub GithubPages ä»‹ç»"></a>Hexo GitHub GithubPages ä»‹ç»</h1><h2 id="Hexo"><a href="#Hexo" class="headerlink" title="Hexo"></a>Hexo</h2><p>Hexoæ˜¯ä¸€ä¸ªå¿«é€Ÿã€ç®€æ´ä¸”é«˜æ•ˆçš„åšå®¢æ¡†æ¶ï¼ŒHexoä½¿ç”¨Markdownï¼ˆæˆ–å…¶ä»–æ¸²æŸ“å¼•æ“ï¼‰è§£ææ–‡ç« ï¼Œåœ¨å‡ ç§’å†…å³å¯åˆ©ç”¨é“ä¸½çš„ä¸»é¢˜ç”Ÿæˆé™æ€ç½‘é¡µã€‚</p>
<h2 id="Github"><a href="#Github" class="headerlink" title="Github"></a>Github</h2><p>ä¸çŸ¥é“Githubçš„ç¨‹åºçŒ¿ï¼Œä¸æ˜¯ä¸€åªå¥½çŒ¿ ~ Githubæ˜¯ä¸€ä¸ªé¢å‘å¼€æºåŠç§æœ‰è½¯ä»¶é¡¹ç›®çš„æ‰˜ç®¡å¹³å°ï¼Œä»…æ”¯æŒGitä½œä¸ºå”¯ä¸€çš„ç‰ˆæœ¬åº“æ ¼å¼è¿›è¡Œæ‰˜ç®¡ã€‚</p>
<h2 id="Github-Pages"><a href="#Github-Pages" class="headerlink" title="Github Pages"></a>Github Pages</h2><p>Github Pageså¯ä»¥ç†è§£ä¸ºç”¨æˆ·ç¼–å†™çš„ã€æ‰˜ç®¡åœ¨githubä¸Šçš„é™æ€ç½‘é¡µï¼Œä½ åªéœ€å°†ä½ çš„æ”¹åŠ¨æäº¤åˆ°Githubï¼Œå°±å¯ä»¥å®ç°æ›´æ”¹ä½ çš„ç½‘é¡µã€‚</p>
<hr>
<h1 id="ç¯å¢ƒæ­å»º"><a href="#ç¯å¢ƒæ­å»º" class="headerlink" title="ç¯å¢ƒæ­å»º"></a>ç¯å¢ƒæ­å»º</h1><h2 id="Node-js-ç‚¹å‡»æœ‰æƒŠå–œ"><a href="#Node-js-ç‚¹å‡»æœ‰æƒŠå–œ" class="headerlink" title="Node.js ç‚¹å‡»æœ‰æƒŠå–œ"></a>Node.js <a href="https://nodejs.org/en/download/" target="_blank" rel="external">ç‚¹å‡»æœ‰æƒŠå–œ</a></h2><p>é€‰æ‹©å¯¹åº”çš„å®‰è£…åŒ…ä¸‹è½½ï¼Œå®‰è£…æˆ‘å°±ä¸å•°å—¦äº†ï¼Œä»¥ä¸‹å‘½ä»¤éªŒè¯å®‰è£…æ˜¯å¦æˆåŠŸ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ node -v</div><div class="line">$ npm -v</div></pre></td></tr></table></figure>
<h2 id="Git"><a href="#Git" class="headerlink" title="Git"></a><a href="https://git-scm.com/" target="_blank" rel="external">Git</a></h2><ul>
<li>Windowä¸‹è½½ç›´æ¥å®‰è£…å³å¯<a href="https://git-scm.com/download/win" target="_blank" rel="external">ç‚¹æˆ‘ä¸‹è½½</a></li>
<li><p>Macå»ºè®®ä½¿ç”¨HomeBrewå®‰è£…Gitã€‚</p>
<ul>
<li><p>å®‰è£…HomeBrewï¼Œç»ˆç«¯è¿è¡Œä¸‹é¢å‘½ä»¤</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ /usr/bin/ruby -e &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&quot;</div></pre></td></tr></table></figure>
</li>
<li><p>å®‰è£…Git</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ brew install git</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h2 id="Hexo-1"><a href="#Hexo-1" class="headerlink" title="Hexo"></a><a href="https://hexo.io/zh-cn/" target="_blank" rel="external">Hexo</a></h2><p>å®‰è£…å‘½ä»¤ï¼š<br><code>$ npm install -g hexo-cli</code></p>
<hr>
<h1 id="Hexoåˆå§‹åŒ–-å»ºç«™"><a href="#Hexoåˆå§‹åŒ–-å»ºç«™" class="headerlink" title="Hexoåˆå§‹åŒ–(å»ºç«™)"></a>Hexoåˆå§‹åŒ–(å»ºç«™)</h1><h2 id="åˆå§‹åŒ–Blogæ–‡ä»¶å¤¹"><a href="#åˆå§‹åŒ–Blogæ–‡ä»¶å¤¹" class="headerlink" title="åˆå§‹åŒ–Blogæ–‡ä»¶å¤¹"></a>åˆå§‹åŒ–Blogæ–‡ä»¶å¤¹</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ hexo init &lt;folder&gt;</div><div class="line">$ cd &lt;folder&gt;</div><div class="line">$ npm install</div></pre></td></tr></table></figure>
<h2 id="æ–‡ä»¶ç›®å½•"><a href="#æ–‡ä»¶ç›®å½•" class="headerlink" title="æ–‡ä»¶ç›®å½•"></a>æ–‡ä»¶ç›®å½•</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">.</div><div class="line">â”œâ”€â”€ _config.yml    é…ç½®æ–‡ä»¶</div><div class="line">â”œâ”€â”€ package.json   åº”ç”¨ç¨‹åºä¿¡æ¯</div><div class="line">â”œâ”€â”€ scaffolds      æ¨¡æ¿æ–‡ä»¶å¤¹ draft.md post.md page.md    </div><div class="line">â”œâ”€â”€ source         èµ„æºæ–‡ä»¶å¤¹</div><div class="line">|   â”œâ”€â”€ _drafts</div><div class="line">|   â””â”€â”€ _posts</div><div class="line">â””â”€â”€ themes         ä¸»é¢˜</div></pre></td></tr></table></figure>
<h2 id="Blogé…ç½®"><a href="#Blogé…ç½®" class="headerlink" title="Blogé…ç½®"></a>Blogé…ç½®</h2><p>æ‰“å¼€_config.ymlæ–‡ä»¶ï¼Œæ‡µé€¼äº†~çœ¼èŠ±ç¼­ä¹±ã€‚ã€‚ã€‚æŒ‘å‡ ä¸ªå¸¸ç”¨çš„è¯´ä¸€ä¸‹ï¼Œè¯¦è§£ç§»æ­¥<a href="https://hexo.io/zh-cn/docs/configuration.html" target="_blank" rel="external">Hexo ç«™ç‚¹é…ç½®</a><br><img src="http://static.zybuluo.com/LeoPoldCrossing/27kshpgxiptltk7p06s1cwpr/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-02-08%2023.03.22.png" alt="å±å¹•å¿«ç…§ 2017-02-08 23.03.22.png-179.7kB"></p>
<h2 id="æœ¬åœ°æŸ¥çœ‹Blogæ•ˆæœ"><a href="#æœ¬åœ°æŸ¥çœ‹Blogæ•ˆæœ" class="headerlink" title="æœ¬åœ°æŸ¥çœ‹Blogæ•ˆæœ"></a>æœ¬åœ°æŸ¥çœ‹Blogæ•ˆæœ</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">#ç”Ÿæˆé™æ€æ–‡ä»¶</div><div class="line">$ hexo generate</div><div class="line">#å¯åŠ¨æœåŠ¡å™¨</div><div class="line">$ hexo server</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ hexo s</div><div class="line">INFO  Start processing</div><div class="line">INFO  Hexo is running at http://localhost:4000/. Press Ctrl+C to stop.</div></pre></td></tr></table></figure>
<hr>
<h1 id="éƒ¨ç½²Blogè‡³Github-Pages"><a href="#éƒ¨ç½²Blogè‡³Github-Pages" class="headerlink" title="éƒ¨ç½²Blogè‡³Github Pages"></a>éƒ¨ç½²Blogè‡³Github Pages</h1><h2 id="æ³¨å†ŒGitHubè´¦æˆ·"><a href="#æ³¨å†ŒGitHubè´¦æˆ·" class="headerlink" title="æ³¨å†ŒGitHubè´¦æˆ·"></a><a href="https://github.com/" target="_blank" rel="external">æ³¨å†ŒGitHubè´¦æˆ·</a></h2><h2 id="åˆ›å»ºä»“åº“"><a href="#åˆ›å»ºä»“åº“" class="headerlink" title="åˆ›å»ºä»“åº“"></a>åˆ›å»ºä»“åº“</h2><ul>
<li><p>ç‚¹å‡»New Repository<br><img src="http://static.zybuluo.com/LeoPoldCrossing/yuxp9w6e6t7zzy8pci09p13l/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-02-08%2021.58.51.png" alt="å±å¹•å¿«ç…§ 2017-02-08 21.58.51.png-12.7kB"></p>
</li>
<li><p>Create a new repository<br><img src="http://static.zybuluo.com/LeoPoldCrossing/4yn5l9oi90843vutpj3ng88i/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-02-08%2022.01.23.png" alt="å±å¹•å¿«ç…§ 2017-02-08 22.01.23.png-85.7kB"></p>
</li>
</ul>
<h2 id="é…ç½®SSHå¯†é’¥"><a href="#é…ç½®SSHå¯†é’¥" class="headerlink" title="é…ç½®SSHå¯†é’¥"></a>é…ç½®SSHå¯†é’¥</h2><p>Gitæœ¬åœ°ä»“åº“å’Œè¿œç¨‹ä»“åº“ä¹‹é—´çš„ä¼ è¾“åè®®ä¸»è¦ä½¿ç”¨sshåè®®ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦è®¾ç½®ssh </p>
<ul>
<li>Step 1 æŸ¥çœ‹æ˜¯å¦å­˜åœ¨SSHå¯†é’¥<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ cd ~/.ssh;ls</div></pre></td></tr></table></figure>
</li>
</ul>
<p>å¦‚æœid_rsa.pubå’Œid_rsaæ–‡ä»¶å­˜åœ¨ï¼Œåˆ™è¯æ˜sshå­˜åœ¨ï¼Œç›´æ¥è¿›è¡ŒStep 3æ“ä½œ</p>
<ul>
<li><p>Step 2 åˆ›å»ºssh</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"># å°†æ ¹æ®æä¾›çš„Emailåœ°å€ç”Ÿæˆä¸€å¯¹å¯†é’¥</div><div class="line">$ ssh-keygen -t rsa -C &quot;youremail@example.com&quot;</div><div class="line"># å›è½¦åˆ™åˆ›å»ºé»˜è®¤çš„sshï¼Œæ–‡ä»¶åä¸ºid_rsa å’Œ id_rsa.pub</div><div class="line"></div><div class="line"># ä¸‹é¢çš„å‘½ä»¤å¯ä»¥è‡ªå®šä¹‰æ–‡ä»¶å</div><div class="line">$ cat ~/.ssh/&lt;ssh file name&gt;.pub</div></pre></td></tr></table></figure>
</li>
<li><p>Step 3 æ·»åŠ SSH key åˆ° Github è´¦æˆ·</p>
<ol>
<li><p>æ·»åŠ å…¬é’¥åˆ°Github<br><img src="http://static.zybuluo.com/LeoPoldCrossing/nw1zvm0lfvlhxfr0b0kcy4q7/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-02-08%2022.14.09.png" alt="å±å¹•å¿«ç…§ 2017-02-08 22.14.09.png-88.6kB"></p>
</li>
<li><p>å·¦ä¾§å·¥å…·æ ç‚¹å‡»SSH and GPG keys<br>title éšæ„å¡«ï¼ŒKey å°†id_rsa.pubä¸­çš„å†…å®¹copyçš„è¿™é‡Œ</p>
</li>
<li>éªŒè¯é“¾æ¥<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">    $ ssh -T git@github.com</div><div class="line">Hi LeoPoldCrossing! You&apos;ve successfully authenticated, but GitHub does not provide shell access.</div><div class="line">    # bingo! SSHé…ç½®å®Œæˆ</div></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li><p>Step 4 ç»‘å®šGit å’Œ Github</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ git config --global user.name &quot;your github username&quot;</div><div class="line">$ git config --global user.email &quot;your github email&quot;</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="å…³è”Hexoå’ŒGitHub"><a href="#å…³è”Hexoå’ŒGitHub" class="headerlink" title="å…³è”Hexoå’ŒGitHub"></a>å…³è”Hexoå’ŒGitHub</h2><ul>
<li><p>Step 1 Copyä»“åº“åœ°å€<br><img src="http://static.zybuluo.com/LeoPoldCrossing/tjkk9gavd3p1ynowzwwzv9bk/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-02-08%2022.35.10.png" alt="å±å¹•å¿«ç…§ 2017-02-08 22.35.10.png-106.9kB"></p>
</li>
<li><p>Step 2 ä¿®æ”¹_config.ymlæ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">deploy:</div><div class="line">  type: git</div><div class="line">  repository: https://github.com/LeoPoldCrossing/LeoPoldCrossing.github.io.git</div><div class="line">  branch: master</div></pre></td></tr></table></figure>
</li>
<li><p>Step 3 åœ¨åšå®¢ç›®å½•ä¸‹æ‰§è¡Œï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div><div class="line">or </div><div class="line">$ hexo g</div><div class="line">------------åä¸½çš„åˆ†å‰²çº¿---------</div><div class="line">$ hexo deploy</div><div class="line">or </div><div class="line">$ hexo d![blog-main.png-368.1kB][6]</div></pre></td></tr></table></figure>
</li>
</ul>
<p>æ ¹æ®æç¤ºè¾“å…¥githubè´¦å·å’Œå¯†ç ï¼Œç„¶åè§è¯åŠ³åŠ¨æˆæœçš„æ—¶åˆ»<br><strong>æµè§ˆå™¨æ‰“å¼€ username.github.io(æˆ‘çš„æ˜¯LeoPoldCrossing.github.io)</strong>ï¼Œæ•ˆæœå›¾å¦‚ä¸‹ï¼š<br><img src="http://static.zybuluo.com/LeoPoldCrossing/t6cpsoeyr86jbc4r4fvmbhpj/blog-main.png" alt="blog-main.png-368.1kB"></p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;å‰è¨€ï¼š2017å¹´ä¼Šå§‹ï¼Œå…ˆç»™è‡ªå·±å®šäº†ä¸€ä¸ªå°ç›®æ ‡ï¼Œå°†Blogè¿ç§»åˆ°Hexoã€‚æœ¬æ–‡æ˜¯æˆ‘2017å¹´çš„å¼€å§‹ï¼Œä¹Ÿæ˜¯æˆ‘åœ¨Hexoçš„å¼€ç«¯ï¼ŒMarkä¸€ä¸‹ï¼&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
    
    </summary>
    
      <category term="æ•™ç¨‹" scheme="http://yoursite.com/categories/%E6%95%99%E7%A8%8B/"/>
    
    
      <category term="Hexo" scheme="http://yoursite.com/tags/Hexo/"/>
    
  </entry>
  
</feed>
